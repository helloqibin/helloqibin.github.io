<!DOCTYPE html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><title>深入理解Redis数据结构：五种基本数据结构及其操作方法 | 满心记</title><meta name=author content=满心记><meta name=copyright content=满心记><meta name=format-detection content="telephone=no"><meta name=theme-color content=#ffffff><meta name=keywords content=满心,设计与开发,Java开发,Vue开发,uni-app开发,研发工程师,产品设计,前端开发,创意与技术,学习与生活,java,vue><script src=https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.6.0/jquery.min.js></script><script src=/js/mx.js></script><script src=/js/mx_gpt.js></script><script data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}" src=https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/pace/1.2.4/pace.min.js></script><link rel=stylesheet href=/plugin/comment/commentBarrage.css><meta name=description content=深入理解Redis数据结构：五种基本数据结构及其操作方法><meta property=og:type content=article><meta property=og:title content=深入理解Redis数据结构：五种基本数据结构及其操作方法><meta property=og:url content=https://blog.lovelu.top/p/aeff.html><meta property=og:site_name content=满心记><meta property=og:description content=深入理解Redis数据结构：五种基本数据结构及其操作方法><meta property=og:locale content=zh_CN><meta property=og:image content=https://img.lovelu.top/2023/03/redis_cover.png><meta property=article:published_time content=2023-01-16T07:45:32.000Z><meta property=article:modified_time content=2024-04-23T01:10:48.320Z><meta property=article:author content=满心记><meta property=article:tag content=教程><meta property=article:tag content=开发><meta name=twitter:card content=summary><meta name=twitter:image content=https://img.lovelu.top/2023/03/redis_cover.png><link rel="shortcut icon" href=/img/manxin_ico.png><link rel=canonical href=https://blog.lovelu.top/p/aeff><link rel=preconnect href=//cdn.jsdelivr.net><link rel=preconnect href=//hm.baidu.com><link rel=stylesheet href=/css/index.css><link rel=stylesheet href=/mx/manxin.css><link rel=stylesheet href=https://cdn2.codesign.qq.com/icons/8ALwE9VdlRZX1Dp/latest/iconfont.css media=print onload='this.media="all"'><link rel=apple-touch-icon href=/img/avatar.ico><link rel=bookmark href=/img/avatar.ico><link rel=apple-touch-icon-precomposed sizes=180x180 href=/img/avatar.ico><link rel=stylesheet href=/plugin/swiper/swiper-bundle.min.css><link rel=stylesheet href=https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css media=print onload='this.media="all"'><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?c652f3c46590d6eccae30a90810f0281";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"K2VH5BX2UQ",apiKey:"a7d907b68bf3f767ad606067b549ffab",indexName:"hexo",hits:{per_page:6},languages:{input_placeholder:"输入关键字快速查找",hits_empty:"找不到您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:400},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!0,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:50,languages:{author:"作者: 满心记",link:"链接: ",source:"来源: 满心记",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"top-center"},source:{justifiedGallery:{js:"https://cdn.staticfile.org/flickr-justified-gallery/2.1.2/fjGallery.min.js",css:"https://cdn.staticfile.org/flickr-justified-gallery/2.1.2/fjGallery.min.css"}},isPhotoFigcaption:!0,islazyload:!0,isAnchor:!1}</script><script id=config-diff>var GLOBAL_CONFIG_SITE={title:"深入理解Redis数据结构：五种基本数据结构及其操作方法",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-04-23 09:10:48"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const a=864e5*o,n={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(n))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=o,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme"),o=(new Date).getHours();void 0===t?o<=6||o>=18?activateDarkMode():activateLightMode():"light"===t?activateLightMode():activateDarkMode();const a=saveToLocal.get("aside-status");void 0!==a&&("hide"===a?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-touch-fullscreen content=yes><meta name=apple-mobile-web-app-status-bar-style content=black-translucent><link rel=manifest href=https://img.lovelu.top/hexo-blog/pwa/manifest.json><link rel=apple-touch-startup-image href=/img/pwa/splash-2048x2732.png media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel=apple-touch-startup-image href=/img/pwa/splash-2732x2048.png media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel=apple-touch-startup-image href=/img/pwa/splash-1668x2388.png media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel=apple-touch-startup-image href=/img/pwa/splash-2388x1668.png media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel=apple-touch-startup-image href=/img/pwa/splash-1536x2048.png media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel=apple-touch-startup-image href=/img/pwa/splash-2048x1536.png media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel=apple-touch-startup-image href=/img/pwa/splash-1668x2224.png media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel=apple-touch-startup-image href=/img/pwa/splash-2224x1668.png media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel=apple-touch-startup-image href=/img/pwa/splash-1620x2160.png media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel=apple-touch-startup-image href=/img/pwa/splash-2160x1620.png media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel=apple-touch-startup-image href=/img/pwa/splash-1290x2796.png media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel=apple-touch-startup-image href=/img/pwa/splash-2796x1290.png media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel=apple-touch-startup-image href=/img/pwa/splash-1179x2556.png media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel=apple-touch-startup-image href=/img/pwa/splash-2556x1179.png media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel=apple-touch-startup-image href=/img/pwa/splash-1248x2778.png media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel=apple-touch-startup-image href=/img/pwa/splash-2778x1248.png media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel=apple-touch-startup-image href=/img/pwa/splash-1170x2532.png media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel=apple-touch-startup-image href=/img/pwa/splash-2532x1170.png media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel=apple-touch-startup-image href=/img/pwa/splash-1125x2436.png media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel=apple-touch-startup-image href=/img/pwa/splash-2436x1125.png media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel=apple-touch-startup-image href="/img/pwa/splash-1242x2688.jpg?v=3" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel=apple-touch-startup-image href="/img/pwa/splash-2688x1242.jpg?v=3" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel=apple-touch-startup-image href="/img/pwa/splash-828x1792.jpg?v=3" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel=apple-touch-startup-image href="/img/pwa/splash-1792x828.jpg?v=3" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel=apple-touch-startup-image href="/img/pwa/splash-1242x2208.jpg?v=3" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel=apple-touch-startup-image href="/img/pwa/splash-2208x1242.jpg?v=3" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel=apple-touch-startup-image href="/img/pwa/splash-750x1334.jpg?v=3" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel=apple-touch-startup-image href="/img/pwa/splash-1334x750.jpg?v=3" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel=apple-touch-startup-image href="/img/pwa/splash-640x1136.jpg?v=3" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel=apple-touch-startup-image href="/img/pwa/splash-1136x640.jpg?v=3" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title=满心记 type=application/atom+xml></head><body><style>#loading-box{-webkit-user-select:none}#loading-box .loading-bg{display:flex;width:100%;height:100%;position:fixed;background:var(--Jay-background);z-index:1999;opacity:1;transition:.2s;pointer-events:all}#loading-box.loaded .loading-bg{pointer-events:none;transition:.2s;animation:hideLoading 1s 0s forwards}#loading-box .loading-img{width:100px;height:100px;margin:auto;animation-duration:.3s;animation-name:loadingAction;animation-iteration-count:infinite;animation-direction:alternate}@keyframes loadingAction{from{opacity:1}to{opacity:.6}}@keyframes hideLoading{from{opacity:1}to{opacity:0}}</style><div id=loading-box onclick=Jay.hideLoading()><div class=loading-bg><img class="loading-img nolazyload entered loading" src="data:image/webp;base64,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" data-ll-status=loading alt=加载背景图片></div></div><div id=web_bg></div><div id=console style=zoom:1><div class=close-btn onclick=Jay.hideConsole() href=javascript:void(0);><i class="mxfont icon-close-fill"></i></div><div class=console-card-group><div class=console-card-group-left><div class=console-card id=card-newest-comments onclick=Jay.hideConsole()><div class=card-content><div class=author-content-item-tips>互动</div><div class=card-hor-content><span class=author-content-item-title>最近评论</span><a class=go_to_recent_comments href=/recentcomments/ data-pjax-state=data-pjax-state><i class="mxfont icon-arrow-right-circle-fill"></i></a></div></div><div class=aside-list id=consoleComment><span>正在加载中...</span></div></div></div><div class=console-card-group-right><div class="console-card tags" onclick=Jay.hideConsole()><div class=card-content><div class=author-content-item-tips>标签</div><span class=author-content-item-title>寻找感兴趣的领域</span></div><div class=card-tag-cloud><a href=/tags/%E6%95%99%E7%A8%8B/ ><span>教程</span><sup>68</sup></a><a href=/tags/%E6%97%A5%E5%B8%B8/ ><span>日常</span><sup>43</sup></a><a href=/tags/%E5%BC%80%E5%8F%91/ ><span>开发</span><sup>30</sup></a><a href=/tags/%E7%9F%A5%E8%AF%86/ ><span>知识</span><sup>30</sup></a><a href=/tags/%E9%97%B2%E8%81%8A/ ><span>闲聊</span><sup>26</sup></a><a href=/tags/%E8%BD%AF%E4%BB%B6/ ><span>软件</span><sup>21</sup></a><a href=/tags/%E5%8A%9E%E5%85%AC/ ><span>办公</span><sup>15</sup></a><a href=/tags/%E8%BF%90%E7%BB%B4/ ><span>运维</span><sup>14</sup></a><a href=/tags/Hexo/ ><span>Hexo</span><sup>13</sup></a><a href=/tags/%E7%BD%91%E9%A1%B5%E5%89%8D%E7%AB%AF/ ><span>网页前端</span><sup>10</sup></a><a href=/tags/%E8%A3%85%E4%BF%AE/ ><span>装修</span><sup>8</sup></a><a href=/tags/%E7%BE%8E%E9%A3%9F/ ><span>美食</span><sup>7</sup></a><a href=/tags/%E8%AF%84%E6%B5%8B/ ><span>评测</span><sup>7</sup></a><a href=/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/ ><span>人工智能</span><sup>6</sup></a><a href=/tags/Docker/ ><span>Docker</span><sup>6</sup></a><a href=/tags/%E5%BF%85%E7%9C%8B/ ><span>必看</span><sup>6</sup></a><a href=/tags/%E5%8E%A8%E8%89%BA/ ><span>厨艺</span><sup>4</sup></a><a href=/tags/%E5%85%AC%E5%91%8A/ ><span>公告</span><sup>3</sup></a><a href=/tags/%E9%9A%8F%E7%AC%94/ ><span>随笔</span><sup>2</sup></a><a href=/tags/%E8%A7%82%E5%BD%B1/ ><span>观影</span><sup>2</sup></a><a href=/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/ ><span>读书笔记</span><sup>2</sup></a><a href=/tags/%E6%96%B0%E5%B9%B4%E7%A5%9D%E6%84%BF/ ><span>新年祝愿</span><sup>2</sup></a><a href=/tags/Halo/ ><span>Halo</span><sup>1</sup></a><a href=/tags/%E6%B8%B8%E7%8E%A9/ ><span>游玩</span><sup>1</sup></a></div></div><div class="console-card history" onclick=Jay.hideConsole()><div class=item-headline><i class="fas fa-archive"></i><span>文章</span></div><div class=item-headline></div><ul class=card-archive-list><li class=card-archive-list-item><a class=card-archive-list-link href=/archives/2024/ ><span class=card-archive-list-date>2024</span><div class=card-archive-list-count-group><span class=card-archive-list-count>28</span><span class=card-archive-list-count-unit>篇</span></div></a></li><li class=card-archive-list-item><a class=card-archive-list-link href=/archives/2023/ ><span class=card-archive-list-date>2023</span><div class=card-archive-list-count-group><span class=card-archive-list-count>94</span><span class=card-archive-list-count-unit>篇</span></div></a></li><li class=card-archive-list-item><a class=card-archive-list-link href=/archives/2022/ ><span class=card-archive-list-date>2022</span><div class=card-archive-list-count-group><span class=card-archive-list-count>40</span><span class=card-archive-list-count-unit>篇</span></div></a></li><li class=card-archive-list-item><a class=card-archive-list-link href=/archives/ ><span class=card-archive-list-date>全部文章</span><div class=card-archive-list-count-group><span class=card-archive-list-count>162</span><span class=card-archive-list-count-unit>篇</span></div></a></li></ul></div></div></div><div class=button-group><div class=console-btn-item><a class=darkmode_switchbutton onclick=rm.switchDarkMode() title=显示模式切换 href=#><i class="mxfont icon-moon-clear-fill"></i></a></div><div class=console-btn-item id=consoleHideAside onclick=Jay.hideAsideBtn() title=单栏和双栏切换><a class=asideSwitch href=#><i class="mxfont icon-side-bar-fill"></i></a></div><div class=console-btn-item id=consoleKeyboard onclick=Jay.keyboardToggle() title=快捷键开关><a class=keyboard-switch href=#><i class="mxfont icon-keyboard-box-fill"></i></a></div><div class=console-btn-item id=consoleCommentBarrage onclick=Jay.switchCommentBarrage() title=热评开关><a class=commentBarrage href=#><i class="mxfont icon-chat-1-fill"></i></a></div><div class=console-btn-item id=consoleFPS onclick=Jay.FPSToggle() title=帧率显示开关><a class=FPS-switch href=#><i class="mxfont icon-dashboard-2-fill"></i></a></div><div class=console-btn-item id=consoleMusic onclick=Jay.musicToggle() title=音乐开关><a class=music-switch href=#><i class="mxfont icon-music-share"></i></a></div></div><div class=console-mask onclick=Jay.hideConsole() href=# rel="external nofollow"></div></div><div id=sidebar style=zoom:1><div id=menu-mask></div><div id=sidebar-menus><div class=site-data><div class="data-item is-center"><div class=data-item-link><a href=/archives/ ><div class=headline>文章</div><div class=length-num>162</div></a></div></div><div class="data-item is-center"><div class=data-item-link><a href=/tags/ ><div class=headline>标签</div><div class=length-num>24</div></a></div></div><div class="data-item is-center"><div class=data-item-link><a href=/categories/ ><div class=headline>分类</div><div class=length-num>12</div></a></div></div><div class="data-item is-center"><div class=data-item-link><a href=/recentcomments/ data-pjax-state=data-pjax-state><div class=headline>评论</div><div class="length-num twikoo_allcount"></div></a></div></div></div><span class=sidebar-menu-item-title>功能</span><div class=sidebar-menu-item><a class="darkmode_switchbutton menu-child" onclick=rm.switchDarkMode() title=显示模式切换 href=#><i class="mxfont icon-moon-clear-fill" style=font-size:1rem></i><span>显示模式</span></a></div><div class=back-menu-list-groups><div class=back-menu-list-group><div class=back-menu-list-title>博客</div><div class=back-menu-list><a class=back-menu-item href=https://lovelu.top/ rel="external nofollow" title=主页 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/home.png alt=主页><span class=back-menu-item-text>主页</span></a><a class=back-menu-item href=https://p.lovelu.top title=前往满心图床 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/mx_photo.png alt=满心图床><span class=back-menu-item-text>满心图床</span></a><a class=back-menu-item href=https://diary.lovelu.top title=前往满心日记本 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/dairy.png alt=日记本><span class=back-menu-item-text>日记本</span></a><a class=back-menu-item href=https://7bu.top/ title=前往去不图床 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/photo.png alt=去不图床><span class=back-menu-item-text>去不图床</span></a></div></div><div class=back-menu-list-group><div class=back-menu-list-title>服务</div><div class=back-menu-list><a class=back-menu-item href=https://icon.zhheo.com/ title=前往图标库 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/icon.png alt=图标库><span class=back-menu-item-text>图标库</span></a><a class=back-menu-item href=https://blog.lovelu.top/wechat/ title=前往公众号 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/gzh.png alt=公众号><span class=back-menu-item-text>公众号</span></a><a class=back-menu-item href=https://www.midjourney.com/ title=前往Midjourney target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/Midjourney.png alt=Midjourney><span class=back-menu-item-text>Midjourney</span></a><a class=back-menu-item href=https://yige.baidu.com/ title=前往文心一格 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/wxyg.png alt=文心一格><span class=back-menu-item-text>文心一格</span></a><a class=back-menu-item href=https://www.bing.com/images/create/ title=前往bing target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/bing.png alt=bing><span class=back-menu-item-text>bing</span></a></div></div><div class=back-menu-list-group><div class=back-menu-list-title>主题</div><div class=back-menu-list><a class=back-menu-item href=https://butterfly.zhheo.com/ title=美化文档 target=_blank one-link-mark=yes><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/mogai.png alt=美化文档><span class=back-menu-item-text>美化文档</span></a><a class=back-menu-item href=https://toscode.gitee.com/helloqibin_admin/hexo-theme-matery.git title=matery主题 target=_blank one-link-mark=yes><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/zhuti.png alt=matery><span class=back-menu-item-text>matery</span></a><a class=back-menu-item href=https://blog.mxheo.com title=仿akilar主题 target=_blank one-link-mark=yes><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/tangguo.png alt=akilar><span class=back-menu-item-text>akilar</span></a></div></div></div><div class=menus_items><div class=menus_item><a class=site-page href=#><span>文库</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/archives/ ><i class="fa-fw mxfont icon-folder-5-fill"></i><span>文章列表</span></a></li><li><a class="site-page child" href=/categories/ ><i class="fa-fw mxfont icon-checkbox-multiple-blank-fill"></i><span>全部分类</span></a></li><li><a class="site-page child" href=/tags/ ><i class="fa-fw mxfont icon-price-tag-3-fill"></i><span>全部标签</span></a></li><li><a class="site-page child" target=_blank rel=noopener href=https://www.mxbkz.com/pianke><i class="fa-fw mxfont icon-shuoshuo1"></i><span>即刻短文</span></a></li></ul></div><div class=menus_item><a class=site-page href=#><span>分享</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/music><i class="fa-fw mxfont icon-music-share"></i><span>音乐欣赏</span></a></li><li><a class="site-page child" href=/movies/ ><i class="fa-fw mxfont icon-movie-share"></i><span>观影之旅</span></a></li><li><a class="site-page child" href=/gallery/ ><i class="fa-fw mxfont icon-photo-share"></i><span>宝藏相册</span></a></li></ul></div><div class=menus_item><a class=site-page href=#><span>友联</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/link/ ><i class="fa-fw mxfont icon-group-fill"></i><span>友情链接</span></a></li><li><a class="site-page child" href=/comments/ ><i class="fa-fw mxfont icon-liuyan"></i><span>博客留言</span></a></li><li><a class="site-page child" href=javascript:travelling()><i class="fa-fw mxfont icon-gift-2-fill"></i><span>宝藏博主</span></a></li></ul></div><div class=menus_item><a class=site-page href=#><span>我的</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/equipment/ ><i class="fa-fw mxfont icon-bijiben"></i><span>我的装备</span></a></li><li><a class="site-page child" href=/stars/ ><i class="fa-fw mxfont icon-site-collect"></i><span>网址收藏</span></a></li><li><a class="site-page child" href=/about/ ><i class="fa-fw mxfont icon-contacts-fill"></i><span>关于本站</span></a></li></ul></div></div><span class=sidebar-menu-item-title>标签</span><div class="card-widget card-tags card-archives card-webinfo card-allinfo"><div class=item-headline><i class="fas fa-tags"></i><span>标签</span></div><div class=card-tag-cloud><a href=/tags/%E6%95%99%E7%A8%8B/ ><span>教程</span><sup>68</sup></a><a href=/tags/%E6%97%A5%E5%B8%B8/ ><span>日常</span><sup>43</sup></a><a href=/tags/%E5%BC%80%E5%8F%91/ ><span>开发</span><sup>30</sup></a><a href=/tags/%E7%9F%A5%E8%AF%86/ ><span>知识</span><sup>30</sup></a><a href=/tags/%E9%97%B2%E8%81%8A/ ><span>闲聊</span><sup>26</sup></a><a href=/tags/%E8%BD%AF%E4%BB%B6/ ><span>软件</span><sup>21</sup></a><a href=/tags/%E5%8A%9E%E5%85%AC/ ><span>办公</span><sup>15</sup></a><a href=/tags/%E8%BF%90%E7%BB%B4/ ><span>运维</span><sup>14</sup></a><a href=/tags/Hexo/ ><span>Hexo</span><sup>13</sup></a><a href=/tags/%E7%BD%91%E9%A1%B5%E5%89%8D%E7%AB%AF/ ><span>网页前端</span><sup>10</sup></a><a href=/tags/%E8%A3%85%E4%BF%AE/ ><span>装修</span><sup>8</sup></a><a href=/tags/%E7%BE%8E%E9%A3%9F/ ><span>美食</span><sup>7</sup></a><a href=/tags/%E8%AF%84%E6%B5%8B/ ><span>评测</span><sup>7</sup></a><a href=/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/ ><span>人工智能</span><sup>6</sup></a><a href=/tags/Docker/ ><span>Docker</span><sup>6</sup></a><a href=/tags/%E5%BF%85%E7%9C%8B/ ><span>必看</span><sup>6</sup></a><a href=/tags/%E5%8E%A8%E8%89%BA/ ><span>厨艺</span><sup>4</sup></a><a href=/tags/%E5%85%AC%E5%91%8A/ ><span>公告</span><sup>3</sup></a><a href=/tags/%E9%9A%8F%E7%AC%94/ ><span>随笔</span><sup>2</sup></a><a href=/tags/%E8%A7%82%E5%BD%B1/ ><span>观影</span><sup>2</sup></a><a href=/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/ ><span>读书笔记</span><sup>2</sup></a><a href=/tags/%E6%96%B0%E5%B9%B4%E7%A5%9D%E6%84%BF/ ><span>新年祝愿</span><sup>2</sup></a><a href=/tags/Halo/ ><span>Halo</span><sup>1</sup></a><a href=/tags/%E6%B8%B8%E7%8E%A9/ ><span>游玩</span><sup>1</sup></a></div></div><span class=sidebar-menu-item-title>网站信息</span><div class=webinfo><div class=webinfo-item><div class=webinfo-item-title><i class="item-icon mxfont icon-file-word-fill"></i><div class=item-name>全站字数 :</div></div><div class=item-count>204k</div></div></div></div></div><div id=keyboard-tips style=zoom:1><div class=keyboardTitle>博客快捷键</div><div class=keybordList><div class=keybordItem><div class=keyGroup><div class=key>shift</div><div class=key>K</div></div><div class=keyContent><div class=content>关闭快捷键功能</div></div></div><div class=keybordItem><div class=keyGroup><div class=key>shift</div><div class=key>A</div></div><div class=keyContent><div class=content>打开中控台</div></div></div><div class=keybordItem><div class=keyGroup><div class=key>shift</div><div class=key>M</div></div><div class=keyContent><div class=content>播放/暂停音乐</div></div></div><div class=keybordItem><div class=keyGroup><div class=key>shift</div><div class=key>D</div></div><div class=keyContent><div class=content>深色/浅色显示模式</div></div></div><div class=keybordItem><div class=keyGroup><div class=key>shift</div><div class=key>S</div></div><div class=keyContent><div class=content>站内搜索</div></div></div><div class=keybordItem><div class=keyGroup><div class=key>shift</div><div class=key>R</div></div><div class=keyContent><div class=content>随机访问</div></div></div><div class=keybordItem><div class=keyGroup><div class=key>shift</div><div class=key>H</div></div><div class=keyContent><div class=content>返回首页</div></div></div><div class=keybordItem><div class=keyGroup><div class=key>shift</div><div class=key>F</div></div><div class=keyContent><div class=content>友链鱼塘</div></div></div><div class=keybordItem><div class=keyGroup><div class=key>shift</div><div class=key>L</div></div><div class=keyContent><div class=content>友链页面</div></div></div><div class=keybordItem><div class=keyGroup><div class=key>shift</div><div class=key>P</div></div><div class=keyContent><div class=content>关于本站</div></div></div></div></div><div class=needEndHide id=nav-music onclick=Jay.musicToggle() style=zoom:1><div id=nav-music-hoverTips>播放音乐</div><meting-js id=3778678 server=netease type=playlist mutex=true preload=none theme=var(--Jay-main) data-lrctype=0 order=random></meting-js></div><div class=post id=body-wrap><header class=post-bg id=page-header style=background-image:url(https://img.lovelu.top/2023/03/redis_cover.png)><nav id=nav><div id=nav-group><div id=blog_name><div class=back-home-button tabindex=-1><i class="back-home-button-icon mxfont icon-apps-fill"></i><div class=back-menu-list-groups><div class=back-menu-list-group><div class=back-menu-list-title>博客</div><div class=back-menu-list><a class=back-menu-item href=https://lovelu.top/ title=主页 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/home.png alt=主页><span class=back-menu-item-text>主页</span></a><a class=back-menu-item href=https://p.lovelu.top title=前往满心图床 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/mx_photo.png alt=满心图床><span class=back-menu-item-text>满心图床</span></a><a class=back-menu-item href=https://diary.lovelu.top title=前往满心日记本 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/dairy.png alt=日记本><span class=back-menu-item-text>日记本</span></a><a class=back-menu-item href=https://7bu.top/ title=前往去不图床 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/photo.png alt=去不图床><span class=back-menu-item-text>去不图床</span></a></div></div><div class=back-menu-list-group><div class=back-menu-list-title>服务</div><div class=back-menu-list><a class=back-menu-item href=https://icon.zhheo.com/ title=前往图标库 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/icon.png alt=图标库><span class=back-menu-item-text>图标库</span></a><a class=back-menu-item href=https://blog.lovelu.top/wechat/ title=前往公众号 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/gzh.png alt=公众号><span class=back-menu-item-text>公众号</span></a><a class=back-menu-item href=https://www.midjourney.com/ title=前往Midjourney target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/Midjourney.png alt=Midjourney><span class=back-menu-item-text>Midjourney</span></a><a class=back-menu-item href=https://yige.baidu.com/ title=前往文心一格 target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/wxyg.png alt=文心一格><span class=back-menu-item-text>文心一格</span></a><a class=back-menu-item href=https://www.bing.com/images/create/ title=前往bing target=_blank><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/bing.png alt=bing><span class=back-menu-item-text>bing</span></a></div></div><div class=back-menu-list-group><div class=back-menu-list-title>主题</div><div class=back-menu-list><a class=back-menu-item href=https://butterfly.zhheo.com/ title=美化文档 target=_blank one-link-mark=yes><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/mogai.png alt=美化文档><span class=back-menu-item-text>美化文档</span></a><a class=back-menu-item href=https://toscode.gitee.com/helloqibin_admin/hexo-theme-matery.git title=matery主题 target=_blank one-link-mark=yes><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/zhuti.png alt=matery><span class=back-menu-item-text>matery</span></a><a class=back-menu-item href=https://blog.mxheo.com title=仿akilar主题 target=_blank one-link-mark=yes><img class=back-menu-item-icon src=https://img.lovelu.top/2023/03/tangguo.png alt=akilar><span class=back-menu-item-text>akilar</span></a></div></div></div></div><a id=site-name href=/ title=返回博客主页><i class="mxfont icon-mxlogo" style=font-size:23px></i></a></div><div id=page-name-mask><div id=page-name><a id=page-name-text onclick=btf.scrollToDest(0,500) href=#>页面没有找到</a></div></div><div id=menus><div class=menus_items><div class=menus_item><a class=site-page href=#><span>文库</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/archives/ ><i class="fa-fw mxfont icon-folder-5-fill"></i><span>文章列表</span></a></li><li><a class="site-page child" href=/categories/ ><i class="fa-fw mxfont icon-checkbox-multiple-blank-fill"></i><span>全部分类</span></a></li><li><a class="site-page child" href=/tags/ ><i class="fa-fw mxfont icon-price-tag-3-fill"></i><span>全部标签</span></a></li><li><a class="site-page child" target=_blank rel=noopener href=https://www.mxbkz.com/pianke><i class="fa-fw mxfont icon-shuoshuo1"></i><span>即刻短文</span></a></li></ul></div><div class=menus_item><a class=site-page href=#><span>分享</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/music><i class="fa-fw mxfont icon-music-share"></i><span>音乐欣赏</span></a></li><li><a class="site-page child" href=/movies/ ><i class="fa-fw mxfont icon-movie-share"></i><span>观影之旅</span></a></li><li><a class="site-page child" href=/gallery/ ><i class="fa-fw mxfont icon-photo-share"></i><span>宝藏相册</span></a></li></ul></div><div class=menus_item><a class=site-page href=#><span>友联</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/link/ ><i class="fa-fw mxfont icon-group-fill"></i><span>友情链接</span></a></li><li><a class="site-page child" href=/comments/ ><i class="fa-fw mxfont icon-liuyan"></i><span>博客留言</span></a></li><li><a class="site-page child" href=javascript:travelling()><i class="fa-fw mxfont icon-gift-2-fill"></i><span>宝藏博主</span></a></li></ul></div><div class=menus_item><a class=site-page href=#><span>我的</span><i class="fas fa-chevron-down"></i></a><ul class=menus_item_child><li><a class="site-page child" href=/equipment/ ><i class="fa-fw mxfont icon-bijiben"></i><span>我的装备</span></a></li><li><a class="site-page child" href=/stars/ ><i class="fa-fw mxfont icon-site-collect"></i><span>网址收藏</span></a></li><li><a class="site-page child" href=/about/ ><i class="fa-fw mxfont icon-contacts-fill"></i><span>关于本站</span></a></li></ul></div></div></div><div id=nav-left><div id=fps-group><div id=fps></div><span class=fpsText>FPS</span></div></div><div id=nav-right><div class="nav-button only-home" id=travellings_button><a class=site-page title=随机开往一个项目网站 target=_blank href=https://www.travellings.cn/go.html rel="external nofollow"><i class="mxfont icon-train-line"></i></a></div><div class=nav-button id=randomPost_button><a class=site-page onclick=toRandomPost() title=随机前往一个文章 href=# rel="external nofollow"><i class="mxfont icon-suiji-artic"></i></a></div><div class=nav-button id=search-button><a class="site-page social-icon search" title=搜索 href=# rel="external nofollow"><i class="mxfont icon-search-2-line"></i></a></div><div class=nav-button id=toggle-winbox><a class=site-page onclick=Jay.toggleWinbox() title=切换背景 href=# rel="external nofollow"><i class="mxfont icon-photo-share"></i></a></div><div class=nav-button id=nav-console><a class=console_switchbutton onclick=Jay.showConsole() title=显示中控台 href=#><i class="mxfont icon-dashboard-fill"></i></a></div><div class=nav-button id=nav-totop><a class=totopbtn onclick=btf.scrollToDest(0,500) title=回到顶部 href=# rel="external nofollow"><i class="mxfont icon-arrow-up-line"></i><span id=percent>0</span></a></div><div id=toggle-menu><a class=site-page href=#><i class="mxfont icon-menu-fill"></i></a></div></div></div></nav><div class="coverdiv loaded" id=coverdiv><img class="nolazyload entered loading" id=post-cover src=https://img.lovelu.top/2023/03/redis_cover.png alt=cover onerror='this.onerror=null,this.src="https://img.lovelu.top/hexo-blog/img/404.png"'></div><div id=post-info><div id=post-firstinfo><div class=meta-firstline><a class=post-meta-original title=本文为转载文章，版权归原作者所有 href=/cc/ >转载</a><span class=post-meta-categories><a class=post-meta-categories href=/categories/%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF/ >网络技术</a></span><div class=tag_share><div class=post-meta__tag-list><a class=post-meta__tags href=/tags/%E6%95%99%E7%A8%8B/ ><span class="tags-name tags-punctuation">教程</span></a><a class=post-meta__tags href=/tags/%E5%BC%80%E5%8F%91/ ><span class="tags-name tags-punctuation">开发</span></a></div></div></div></div><h1 class=post-title>深入理解Redis数据结构：五种基本数据结构及其操作方法</h1><div id=post-meta><div class=meta-secondline><span class=post-meta-separator></span><span class=post-meta-wordcount title=字数总计><i class="mxfont icon-file-word-fill"></i><span class=word-count>13.8k</span><span class=post-meta-separator></span><i class="mxfont icon-time-fill" title=阅读时长></i><span class=post-meta-label>阅读时长</span><span class=word-count>43分钟</span></span><span class=post-meta-date><i class="mxfont icon-calendar-todo-fill"></i><span class=post-meta-label>发表于</span><time datetime=2023-01-16T07:45:32.000Z title="发表于 2023-01-16 15:45:32">2023-01-16</time></span><span class=post-meta-wechat title=该文章在博客首发 onclick='pjax.loadUrl("/wechat/")'><i class="mxfont icon-rss-fill"></i>博客独享</span><span class=post-meta-position title=作者IP属地为武汉><i class="mxfont icon-map-pin-fill"></i>武汉</span><span class=post-meta-commentcount onclick='Jay.scrollTo("#post-comment")' title=评论数><i class="mxfont icon-chat-1-fill"></i><a href=/p/aeff.html#post-comment><span id=twikoo-count><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class=waves-svg xmlns=http://www.w3.org/2000/svg xlink=http://www.w3.org/1999/xlink viewBox="0 24 150 28" preserveAspectRatio=none shape-rendering=auto><defs><path id=gentle-wave d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class=parallax><use href=#gentle-wave x=48 y=0></use><use href=#gentle-wave x=48 y=3></use><use href=#gentle-wave x=48 y=5></use><use href=#gentle-wave x=48 y=7></use></g></svg></section></header><main class=layout id=content-inner><div id=post><div class=post-ai><div class=ai-title><a class=ai-title-left target=_blank rel=noopener href=https://blog.zhheo.com/p/528bc686.html title=查看详情 data-pjax-state><i class="mxfont icon-ie-ChatGPT ai-title-icon"></i><div class=ai-title-text>文章摘要</div><div class=ai-link><i class="mxfont icon-arrow-right-s-line"></i></div></a><div class=ai-tag id=ai-tag>MxGPT</div></div><div class=ai-explanation style=display:block>本文介绍了Redis是一种内存数据库，它实现的五种基本数据结构：字符串、哈希、列表、集合和有序集合，以及它们的使用场景和操作方法。为了更好地说明这些结构，作者还画了40张图，涵盖了这些数据结构及其操作的各个方面。无论你是新手还是有经验的Redis用户，本文都会给你带来帮助，让你更好地理解和使用Redis。</div><div class=ai-suggestions></div><div class=ai-bottom><div class=ai-tips>此内容根据文章生成，并经过人工审核，仅用于文章内容的解释与总结</div><a class=ai-report href=https://blog.lovelu.top/comments/ rel="external nofollow" target=_blank title=投诉>投诉</a></div></div><article class=post-content id=article-container><div class=Jay-tag-link><a class=tag-Link target=_blank href=https://mp.weixin.qq.com/s/Hk5utZDdfz3Gk7NIUheUVw><div class=tag-link-tips>引用站外地址，不保证站点的可用性和安全性</div><div class=tag-link-bottom><div class=tag-link-left><i class="mxfont icon-link"></i></div><div class=tag-link-right><div class=tag-link-title>为了拿捏 Redis 数据结构，我画了 40 张图</div><div class=tag-link-sitename>小林coding</div></div><i class="mxfont icon-arrow-right-s-line"></i></div></a></div><h2 id=正文><a href=#正文 class=headerlink title=正文></a>正文</h2><p><strong>Redis 为什么那么快？</strong></p><p>除了它是内存数据库，使得所有的操作都在内存上进行之外，还有一个重要因素，它实现的数据结构，使得我们对数据进行增删查改操作时，Redis 能高效的处理。</p><p>因此，这次我们就来好好聊一下 Redis 数据结构，这个在面试中太常问了。</p><p>注意，<strong>Redis 数据结构并不是指 String（字符串）对象、List（列表）对象、Hash（哈希）对象、Set（集合）对象和 Zset（有序集合）对象，因为这些是 Redis 键值对中值的数据类型，也就是数据的保存形式，这些对象的底层实现的方式就用到了数据结构。</strong></p><p>我画了一张 Redis 数据类型（也叫 Redis 对象）和底层数据结构的对应关图，左边是 Redis 3.0版本的，也就是《Redis 设计与实现》这本书讲解的版本，现在看还是有点过时了，右边是现在 Github 最新的 Redis 代码的（还未发布正式版本）。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast1.png alt=""></p><p>可以看到，Redis 数据类型的底层数据结构随着版本的更新也有所不同，比如：</p><ul><li>在 Redis 3.0 版本中 List 对象的底层数据结构由「双向链表」或「压缩表列表」实现，但是在 3.2 版本之后，List 数据类型底层数据结构是由 quicklist 实现的；</li><li>在最新的 Redis 代码（还未发布正式版本）中，压缩列表数据结构已经废弃了，交由 listpack 数据结构来实现了。</li></ul><p><strong>这次，把新旧版本的数据结构说图解一遍，共有 9 种数据结构：SDS、双向链表、压缩列表、哈希表、跳表、整数集合、quicklist、listpack。</strong></p><p>不多 BB 了，直接发车！</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast2.png alt=""></p><h2 id=键值对数据库是怎么实现的？><a href=#键值对数据库是怎么实现的？ class=headerlink title=键值对数据库是怎么实现的？></a>键值对数据库是怎么实现的？</h2><p>在开始讲数据结构之前，先给介绍下 Redis 是怎样实现键值对（key-value）数据库的。</p><p>Redis 的键值对中的 key 就是字符串对象，而<strong>value 可以是字符串对象，也可以是集合数据类型的对象</strong>，比如 List 对象、Hash 对象、Set 对象和 Zset 对象。</p><p>举个例子，我这里列出几种 Redis 新增键值对的命令：</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>&gt; SET name <span class=string>&quot;xiaolincoding&quot;</span></span><br><span class=line>OK</span><br><span class=line></span><br><span class=line>&gt; HSET person name <span class=string>&quot;xiaolincoding&quot;</span> age <span class=number>18</span></span><br><span class=line><span class=number>0</span></span><br><span class=line></span><br><span class=line>&gt; RPUSH stu <span class=string>&quot;xiaolin&quot;</span> <span class=string>&quot;xiaomei&quot;</span></span><br><span class=line>(integer) <span class=number>4</span></span><br></pre></td></tr></table></figure><p>这些命令代表着：</p><ul><li>第一条命令：name 是一个<strong>字符串键</strong>，因为键的<strong>值是一个字符串对象</strong>；</li><li>第二条命令：person 是一个<strong>哈希表键</strong>，因为键的<strong>值是一个包含两个键值对的哈希表对象</strong>；</li><li>第三条命令：stu 是一个<strong>列表键</strong>，因为键的<strong>值是一个包含两个元素的列表对象</strong>；</li></ul><p>这些键值对是如何保存在 Redis 中的呢？</p><p>Redis 是使用了一个「哈希表」保存所有键值对，哈希表的最大好处就是让我们可以用 O(1) 的时间复杂度来快速查找到键值对。哈希表其实就是一个数组，数组中的元素叫做哈希桶。</p><p>Redis 的哈希桶是怎么保存键值对数据的呢？</p><p>哈希桶存放的是指向键值对数据的指针（dictEntry<em>），这样通过指针就能找到键值对数据，然后因为键值对的值可以保存字符串对象和集合数据类型的对象，所以键值对的数据结构中并不是直接保存值本身，而是保存了 void</em>key 和 void<em>value 指针，分别指向了实际的键对象和值对象，这样一来，即使值是集合数据，也可以通过 void</em>value 指针找到。</p><p>我这里画了一张 Redis 保存键值对所涉及到的数据结构。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast3.png alt=""></p><p>这些数据结构的内部细节，我先不展开讲，后面在讲哈希表数据结构的时候，在详细的说说，因为用到的数据结构是一样的。这里先大概说下图中涉及到的数据结构的名字和用途：</p><ul><li>redisDb 结构，表示 Redis 数据库的结构，结构体里存放了指向了 dict 结构的指针；<br>dict 结构，结构体里存放了 2 个哈希表，正常情况下都是用「哈希表1」，「哈希表2」只有在 rehash 的时候才用，具体什么是 rehash，我在本文的哈希表数据结构会讲；</li><li>ditctht 结构，表示哈希表的结构，结构里存放了哈希表数组，数组中的每个元素都是指向一个哈希表节点结构（dictEntry）的指针；</li><li>dictEntry 结构，表示哈希表节点的结构，结构里存放了<strong>void<em>key 和 void</em>value 指针，<em>key 指向的是 String 对象，而</em>value 则可以指向 String 对象，也可以指向集合类型的对象，比如 List 对象、Hash 对象、Set 对象和 Zset 对象。</strong></li></ul><p>特别说明下，void<em>key 和 void</em>value 指针指向的是<strong>Redis 对象</strong>，Redis 中的每个对象都由 redisObject 结构表示，如下图：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast4.png alt=""></p><p>对象结构里包含的成员变量：</p><ul><li>type，标识该对象是什么类型的对象（String 对象、 List 对象、Hash 对象、Set 对象和 Zset 对象）；</li><li>encoding，标识该对象使用了哪种底层的数据结构；</li><li><strong>ptr，指向底层数据结构的指针。</strong></li></ul><p>我画了一张 Redis 键值对数据库的全景图，你就能清晰知道 Redis 对象和数据结构的关系了：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast5.png alt=""></p><p>接下里，就好好聊一下底层数据结构！</p><h2 id=SDS><a href=#SDS class=headerlink title=SDS></a>SDS</h2><p>字符串在 Redis 中是很常用的，键值对中的键是字符串类型，值有时也是字符串类型。</p><p>Redis 是用 C 语言实现的，但是它没有直接使用 C 语言的 char* 字符数组来实现字符串，而是自己封装了一个名为简单动态字符串（simple dynamic string，SDS） 的数据结构来表示字符串，也就是 Redis 的 String 数据类型的底层数据结构是 SDS。</p><p>既然 Redis 设计了 SDS 结构来表示字符串，肯定是 C 语言的 char* 字符数组存在一些缺陷。</p><p>要了解这一点，得先来看看 char* 字符数组的结构。</p><p><strong>C 语言字符串的缺陷</strong></p><p>C 语言的字符串其实就是一个字符数组，即数组中每个元素是字符串中的一个字符。</p><p>比如，下图就是字符串“xiaolin”的 char* 字符数组的结构：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast6.png alt=""></p><p>没学过 C 语言的同学，可能会好奇为什么最后一个字符是“\0”？</p><p>在 C 语言里，对字符串操作时，char<em>指针只是指向字符数组的起始位置，而<em>*字符数组的结尾位置就用“\0”表示，意思是指字符串的结束。</em></em></p><p>因此，C 语言标准库中的字符串操作函数就通过判断字符是不是 “\0” 来决定要不要停止操作，如果当前字符不是 “\0” ，说明字符串还没结束，可以继续操作，如果当前字符是 “\0” 是则说明字符串结束了，就要停止操作。</p><p>举个例子，C 语言获取字符串长度的函数<code>strlen</code>，就是通过字符数组中的每一个字符，并进行计数，等遇到字符为 “\0” 后，就会停止遍历，然后返回已经统计到的字符个数，即为字符串长度。下图显示了 strlen 函数的执行流程：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast7.png alt=""></p><p>很明显，<strong>C 语言获取字符串长度的时间复杂度是 O（N）</strong>（<code>这是一个可以改进的地方</code>）</p><p>C 语言字符串用 “\0” 字符作为结尾标记有个缺陷。假设有个字符串中有个 “\0” 字符，这时在操作这个字符串时就会<strong>提早结束</strong>，比如 “xiao\0lin” 字符串，计算字符串长度的时候则会是 4，如下图：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast8.png alt=""></p><p>因此，除了字符串的末尾之外，<strong>字符串里面不能含有 “\0” 字符</strong>，否则最先被程序读入的 “\0” 字符将被误认为是字符串结尾，这个限制使得 C 语言的字符串只能保存文本数据，<strong>不能保存像图片、音频、视频文化这样的二进制数据</strong>（<code>这也是一个可以改进的地方</code>）</p><p>另外， C 语言标准库中字符串的操作函数是很不安全的，对程序员很不友好，稍微一不注意，就会导致缓冲区溢出。</p><p>举个例子，strcat 函数是可以将两个字符串拼接在一起。</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=comment>//将 src 字符串拼接到 dest 字符串后面</span></span><br><span class=line> <span class=type>char</span> *strcat(<span class=type>char</span> *dest, const <span class=type>char</span>* src);</span><br></pre></td></tr></table></figure><p><strong>C 语言的字符串是不会记录自身的缓冲区大小的</strong>，所以 strcat 函数假定程序员在执行这个函数时，已经为 dest 分配了足够多的内存，可以容纳 src 字符串中的所有内容，而<strong>一旦这个假定不成立，就会发生缓冲区溢出将可能会造成程序运行终止</strong>，（<code>这是一个可以改进的地方</code>）。</p><p>而且，strcat 函数和 strlen 函数类似，时间复杂度也很高，也都需要先通过遍历字符串才能得到目标字符串的末尾。然后对于 strcat 函数来说，还要再遍历源字符串才能完成追加，<strong>对字符串的操作效率不高</strong>。</p><p>好了， 通过以上的分析，我们可以得知 C 语言的字符串不足之处以及可以改进的地方：</p><ul><li>获取字符串长度的时间复杂度为 O（N）；</li><li>字符串的结尾是以 “\0” 字符标识，字符串里面不能包含有 “\0” 字符，因此不能保存二进制数据；</li><li>字符串操作函数不高效且不安全，比如有缓冲区溢出的风险，有可能会造成程序运行终止；</li></ul><p>Redis 实现的 SDS 的结构就把上面这些问题解决了，接下来我们一起看看 Redis 是如何解决的。</p><h3 id=SDS-结构设计><a href=#SDS-结构设计 class=headerlink title="SDS 结构设计"></a>SDS 结构设计</h3><p>下图就是 Redis 5.0 的 SDS 的数据结构：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast9.png alt=""></p><p>结构中的每个成员变量分别介绍下：</p><p><strong>len，记录了字符串长度</strong>。这样获取字符串长度的时候，只需要返回这个成员变量值就行，时间复杂度只需要 O（1）。</p><p><strong>alloc，分配给字符数组的空间长度</strong>。这样在修改字符串的时候，可以通过<code>alloc - len</code>计算出剩余的空间大小，可以用来判断空间是否满足修改需求，如果不满足的话，就会自动将 SDS 的空间扩展至执行修改所需的大小，然后才执行实际的修改操作，所以使用 SDS 既不需要手动修改 SDS 的空间大小，也不会出现前面所说的缓冲区溢出的问题。</p><p><strong>flags，用来表示不同类型的 SDS</strong>。一共设计了 5 种类型，分别是 sdshdr5、sdshdr8、sdshdr16、sdshdr32 和 sdshdr64，后面在说明区别之处。</p><p><strong>buf[]，字符数组，用来保存实际数据</strong>。不仅可以保存字符串，也可以保存二进制数据。</p><p>总的来说，Redis 的 SDS 结构在原本字符数组之上，增加了三个元数据：len、alloc、flags，用来解决 C 语言字符串的缺陷。</p><h4 id=O（1）复杂度获取字符串长度><a href=#O（1）复杂度获取字符串长度 class=headerlink title=O（1）复杂度获取字符串长度></a>O（1）复杂度获取字符串长度</h4><p>C 语言的字符串长度获取 strlen 函数，需要通过遍历的方式来统计字符串长度，时间复杂度是 O（N）。</p><p>而 Redis 的 SDS 结构因为加入了 len 成员变量，那么<strong>获取字符串长度的时候，直接返回这个成员变量的值就行，所以复杂度只有 O（1）。</strong></p><h4 id=二进制安全><a href=#二进制安全 class=headerlink title=二进制安全></a>二进制安全</h4><p>因为 SDS 不需要用 “\0” 字符来标识字符串结尾了，而是<strong>有个专门的 len 成员变量来记录长度，所以可存储包含 “\0” 的数据</strong>。但是 SDS 为了兼容部分 C 语言标准库的函数， SDS 字符串结尾还是会加上 “\0” 字符。</p><p>因此， SDS 的 API 都是以处理二进制的方式来处理 SDS 存放在 buf[] 里的数据，程序不会对其中的数据做任何限制，数据写入的时候时什么样的，它被读取时就是什么样的。</p><p>通过使用二进制安全的 SDS，而不是 C 字符串，使得 Redis 不仅可以保存文本数据，也可以保存任意格式的二进制数据。</p><h4 id=不会发生缓冲区溢出><a href=#不会发生缓冲区溢出 class=headerlink title=不会发生缓冲区溢出></a>不会发生缓冲区溢出</h4><p>C 语言的字符串标准库提供的字符串操作函数，大多数（比如 strcat 追加字符串函数）都是不安全的，因为这些函数把缓冲区大小是否满足操作需求的工作交由开发者来保证，程序内部并不会判断缓冲区大小是否足够用，当发生了缓冲区溢出就有可能造成程序异常结束。</p><p>所以，Redis 的 SDS 结构里引入了 alloc 和 len 成员变量，这样 SDS API 通过 alloc - len 计算，可以算出剩余可用的空间大小，这样在对字符串做修改操作的时候，就可以由程序内部判断缓冲区大小是否足够用。</p><p>而且，<strong>当判断出缓冲区大小不够用时，Redis 会自动将扩大 SDS 的空间大小（小于 1MB 翻倍扩容，大于 1MB 按 1MB 扩容</strong>），以满足修改所需的大小。</p><p>在扩展 SDS 空间之前，SDS API 会优先检查未使用空间是否足够，如果不够的话，API 不仅会为 SDS 分配修改所必须要的空间，还会给 SDS 分配额外的「未使用空间」。</p><p>这样的好处是，下次在操作 SDS 时，如果 SDS 空间够的话，API 就会直接使用「未使用空间」，而无须执行内存分配，<strong>有效的减少内存分配次数</strong>。</p><p>所以，使用 SDS 即不需要手动修改 SDS 的空间大小，也不会出现缓冲区溢出的问题。</p><h4 id=节省内存空间><a href=#节省内存空间 class=headerlink title=节省内存空间></a>节省内存空间</h4><p>SDS 结构中有个 flags 成员变量，表示的是 SDS 类型。</p><p>Redos 一共设计了 5 种类型，分别是 sdshdr5、sdshdr8、sdshdr16、sdshdr32 和 sdshdr64。</p><p>这 5 种类型的主要<strong>区别就在于，它们数据结构中的 len 和 alloc 成员变量的数据类型不同。</strong></p><p>比如 sdshdr16 和 sdshdr32 这两个类型，它们的定义分别如下：</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line>struct <span class="title function_">__attribute__</span> <span class=params>((__packed__)</span>) sdshdr16 &#123;</span><br><span class=line>    uint16_t len;</span><br><span class=line>    uint16_t alloc;</span><br><span class=line>    unsigned <span class=type>char</span> flags;</span><br><span class=line>    <span class=type>char</span> buf[];</span><br><span class=line>&#125;;</span><br><span class=line></span><br><span class=line></span><br><span class=line>struct <span class="title function_">__attribute__</span> <span class=params>((__packed__)</span>) sdshdr32 &#123;</span><br><span class=line>    uint32_t len;</span><br><span class=line>    uint32_t alloc;</span><br><span class=line>    unsigned <span class=type>char</span> flags;</span><br><span class=line>    <span class=type>char</span> buf[];</span><br><span class=line>&#125;;</span><br></pre></td></tr></table></figure><p>可以看到：</p><ul><li>sdshdr16 类型的 len 和 alloc 的数据类型都是 uint16_t，表示字符数组长度和分配空间大小不能超过 2 的 16 次方。</li><li>sdshdr32 则都是 uint32_t，表示表示字符数组长度和分配空间大小不能超过 2 的 32 次方。</li></ul><p><strong>之所以 SDS 设计不同类型的结构体，是为了能灵活保存不同大小的字符串，从而有效节省内存空间</strong>。比如，在保存小字符串时，结构头占用空间也比较少。</p><p>除了设计不同类型的结构体，Redis 在编程上还使用了专门的编译优化来节省内存空间，即在 struct 声明了<code>__attribute__ ((packed))</code>，它的作用是：<strong>告诉编译器取消结构体在编译过程中的优化对齐，按照实际占用字节数进行对齐</strong>。</p><p>比如，sdshdr16 类型的 SDS，默认情况下，编译器会按照 16 字节对齐的方式给变量分配内存，这意味着，即使一个变量的大小不到 16 个字节，编译器也会给它分配 16 个字节。</p><p>举个例子，假设下面这个结构体，它有两个成员变量，类型分别是 char 和 int，如下所示：</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre></td><td class=code><pre><span class=line>#include &lt;stdio.h&gt;</span><br><span class=line></span><br><span class=line> struct test1 &#123;</span><br><span class=line>    <span class=type>char</span> a;</span><br><span class=line>    <span class=type>int</span> b;</span><br><span class=line> &#125; test1;</span><br><span class=line></span><br><span class=line><span class=type>int</span> <span class="title function_">main</span><span class=params>()</span> &#123;</span><br><span class=line>     printf(<span class=string>&quot;%lu\n&quot;</span>, sizeof(test1));</span><br><span class=line>     <span class=keyword>return</span> <span class=number>0</span>;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure><p>大家猜猜这个结构体大小是多少？我先直接说答案，这个结构体大小计算出来是 8。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast10.png alt=""></p><p>这是因为默认情况下，编译器是使用「字节对齐」的方式分配内存，虽然 char 类型只占一个字节，但是由于成员变量里有 int 类型，它占用了 4 个字节，所以在成员变量为 char 类型分配内存时，会分配 4 个字节，其中这多余的 3 个字节是为了字节对齐而分配的，相当于有 3 个字节被浪费掉了。</p><p>如果不想编译器使用字节对齐的方式进行分配内存，可以采用了<code>__attribute__ ((packed))</code>属性定义结构体，这样一来，结构体实际占用多少内存空间，编译器就分配多少空间。</p><p>比如，我用<code>__attribute__ ((packed))</code>属性定义下面的结构体 ，同样包含 char 和 int 两个类型的成员变量，代码如下所示：</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre></td><td class=code><pre><span class=line>#include &lt;stdio.h&gt;</span><br><span class=line></span><br><span class=line>struct <span class="title function_">__attribute__</span><span class=params>((packed)</span>) test2  &#123;</span><br><span class=line>    <span class=type>char</span> a;</span><br><span class=line>    <span class=type>int</span> b;</span><br><span class=line> &#125; test2;</span><br><span class=line></span><br><span class=line><span class=type>int</span> <span class="title function_">main</span><span class=params>()</span> &#123;</span><br><span class=line>     printf(<span class=string>&quot;%lu\n&quot;</span>, sizeof(test2));</span><br><span class=line>     <span class=keyword>return</span> <span class=number>0</span>;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure><p>这时打印的结果是 5（1 个字节 char + 4 字节 int）。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast11.png alt=""></p><p>可以看得出，这是按照实际占用字节数进行分配内存的，这样可以节省内存空间。</p><h2 id=链表><a href=#链表 class=headerlink title=链表></a>链表</h2><p>大家最熟悉的数据结构除了数组之外，我相信就是链表了。</p><p>Redis 的 List 对象的底层实现之一就是链表。C 语言本身没有链表这个数据结构的，所以 Redis 自己设计了一个链表数据结构。</p><h3 id=链表节点结构设计><a href=#链表节点结构设计 class=headerlink title=链表节点结构设计></a>链表节点结构设计</h3><p>先来看看「链表节点」结构的样子：</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>typedef struct listNode &#123;</span><br><span class=line>    <span class=comment>//前置节点</span></span><br><span class=line>    struct listNode *prev;</span><br><span class=line>    <span class=comment>//后置节点</span></span><br><span class=line>    struct listNode *next;</span><br><span class=line>    <span class=comment>//节点的值</span></span><br><span class=line>    <span class=keyword>void</span> *value;</span><br><span class=line>&#125; listNode;</span><br></pre></td></tr></table></figure><p>有前置节点和后置节点，可以看的出，这个是一个双向链表。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast12.png alt=""></p><h3 id=链表结构设计><a href=#链表结构设计 class=headerlink title=链表结构设计></a>链表结构设计</h3><p>不过，Redis 在 listNode 结构体基础上又封装了 list 这个数据结构，这样操作起来会更方便，链表结构如下：</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line>typedef struct list &#123;</span><br><span class=line>    <span class=comment>//链表头节点</span></span><br><span class=line>    listNode *head;</span><br><span class=line>    <span class=comment>//链表尾节点</span></span><br><span class=line>    listNode *tail;</span><br><span class=line>    <span class=comment>//节点值复制函数</span></span><br><span class=line>    <span class=keyword>void</span> *(*dup)(<span class=keyword>void</span> *ptr);</span><br><span class=line>    <span class=comment>//节点值释放函数</span></span><br><span class=line>    <span class=keyword>void</span> (*free)(<span class=keyword>void</span> *ptr);</span><br><span class=line>    <span class=comment>//节点值比较函数</span></span><br><span class=line>    <span class=type>int</span> (*match)(<span class=keyword>void</span> *ptr, <span class=keyword>void</span> *key);</span><br><span class=line>    <span class=comment>//链表节点数量</span></span><br><span class=line>    unsigned <span class=type>long</span> len;</span><br><span class=line>&#125; list;</span><br></pre></td></tr></table></figure><p>list 结构为链表提供了链表头指针 head、链表尾节点 tail、链表节点数量 len、以及可以自定义实现的 dup、free、match 函数。</p><p>举个例子，下面是由 list 结构和 3 个 listNode 结构组成的链表。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast13.png alt=""></p><h3 id=链表的优势与缺陷><a href=#链表的优势与缺陷 class=headerlink title=链表的优势与缺陷></a>链表的优势与缺陷</h3><p>Redis 的链表实现优点如下：</p><ul><li>listNode 链表节点的结构里带有 prev 和 next 指针，<strong>获取某个节点的前置节点或后置节点的时间复杂度只需O(1)，而且这两个指针都可以指向 NULL，所以链表是无环链表</strong>；</li><li>list 结构因为提供了表头指针 head 和表尾节点 tail，所以<strong>获取链表的表头节点和表尾节点的时间复杂度只需O(1)</strong>；</li><li>list 结构因为提供了链表节点数量 len，所以<strong>获取链表中的节点数量的时间复杂度只需O(1)</strong>；</li><li>listNode 链表节使用 void<em>指针保存节点值，并且可以通过 list 结构的 dup、free、match 函数指针为节点设置该节点类型特定的函数，因此<em>*链表节点可以保存各种不同类型的值</em></em>；</li></ul><p>链表的缺陷也是有的：</p><ul><li>链表每个节点之间的内存都是不连续的，意味着无法<strong>很好利用 CPU 缓存</strong>。能很好利用 CPU 缓存的数据结构就是数组，因为数组的内存是连续的，这样就可以充分利用 CPU 缓存来加速访问。</li><li>还有一点，保存一个链表节点的值都需要一个链表节点结构头的分配，<strong>内存开销较大</strong>。</li></ul><p>因此，Redis 3.0 的 List 对象在数据量比较少的情况下，会采用「压缩列表」作为底层数据结构的实现，它的优势是节省内存空间，并且是内存紧凑型的数据结构。</p><p>不过，压缩列表存在性能问题（具体什么问题，下面会说），所以 Redis 在 3.2 版本设计了新的数据结构 quicklist，并将 List 对象的底层数据结构改由 quicklist 实现。</p><p>然后在 Redis 5.0 设计了新的数据结构 listpack，沿用了压缩列表紧凑型的内存布局，最终在最新的 Redis 版本，将 Hash 对象和 Zset 对象的底层数据结构实现之一的压缩列表，替换成由 listpack 实现。</p><h2 id=压缩列表><a href=#压缩列表 class=headerlink title=压缩列表></a>压缩列表</h2><p>压缩列表的最大特点，就是它被设计成一种内存紧凑型的数据结构，占用一块连续的内存空间，不仅可以利用 CPU 缓存，而且会针对不同长度的数据，进行相应编码，这种方法可以有效地节省内存开销。</p><p>但是，压缩列表的缺陷也是有的：</p><ul><li>不能保存过多的元素，否则查询效率就会降低；</li><li>新增或修改某个元素时，压缩列表占用的内存空间需要重新分配，甚至可能引发连锁更新的问题。</li></ul><p>因此，Redis 对象（List 对象、Hash 对象、Zset 对象）包含的元素数量较少，或者元素值不大的情况才会使用压缩列表作为底层数据结构。</p><p>接下来，就跟大家详细聊下压缩列表。</p><h3 id=压缩列表结构设计><a href=#压缩列表结构设计 class=headerlink title=压缩列表结构设计></a>压缩列表结构设计</h3><p>压缩列表是 Redis 为了节约内存而开发的，它是<strong>由连续内存块组成的顺序型数据结构，有点类似于数组</strong>。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast14.png alt=""></p><p>压缩列表在表头有三个字段：</p><ul><li><code>zlbytes</code>，记录整个压缩列表占用对内存字节数；</li><li><code>zltail</code>，记录压缩列表「尾部」节点距离起始地址由多少字节，也就是列表尾的偏移量；</li><li><code>zllen</code>，记录压缩列表包含的节点数量；</li><li><code>zlend</code>，标记压缩列表的结束点，固定值 0xFF（十进制255）。</li></ul><p>在压缩列表中，如果我们要查找定位第一个元素和最后一个元素，可以通过表头三个字段的长度直接定位，复杂度是 O(1)。而<strong>查找其他元素时，就没有这么高效了，只能逐个查找，此时的复杂度就是 O(N) 了，因此压缩列表不适合保存过多的元素</strong>。</p><p>另外，压缩列表节点（entry）的构成如下：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast15.png alt=""></p><p>压缩列表节点包含三部分内容：</p><ul><li><code>prevlen</code>，记录了「前一个节点」的长度；</li><li><code>encoding</code>，记录了当前节点实际数据的类型以及长度；</li><li><code>data</code>，记录了当前节点的实际数据；</li></ul><p>当我们往压缩列表中插入数据时，压缩列表就会根据数据是字符串还是整数，以及数据的大小，会使用不同空间大小的 prevlen 和 encoding 这两个元素里保存的信息，<strong>这种根据数据大小和类型进行不同的空间大小分配的设计思想，正是 Redis 为了节省内存而采用的</strong>。</p><p>分别说下，prevlen 和 encoding 是如何根据数据的大小和类型来进行不同的空间大小分配。</p><p>压缩列表里的每个节点中的 prevlen 属性都记录了「前一个节点的长度」，而且 prevlen 属性的空间大小跟前一个节点长度值有关，比如：</p><ul><li>如果<strong>前一个节点的长度小于 254 字节</strong>，那么 prevlen 属性需要用<strong>1 字节的空间</strong>来保存这个长度值；</li><li>如果<strong>前一个节点的长度大于等于 254 字节</strong>，那么 prevlen 属性需要用<strong>5 字节的空间</strong>来保存这个长度值；</li></ul><p>encoding 属性的空间大小跟数据是字符串还是整数，以及字符串的长度有关：</p><ul><li>如果<strong>当前节点的数据是整数</strong>，则 encoding 会使用<strong>1 字节的空间</strong>进行编码。</li><li>如果<strong>当前节点的数据是字符串，根据字符串的长度大小</strong>，encoding 会使用<strong>1 字节/2字节/5字节的空间</strong>进行编码。</li></ul><h3 id=连锁更新><a href=#连锁更新 class=headerlink title=连锁更新></a>连锁更新</h3><p>压缩列表除了查找复杂度高的问题，还有一个问题。</p><p>压缩列表新增某个元素或修改某个元素时，如果空间不不够，压缩列表占用的内存空间就需要重新分配。而当新插入的元素较大时，可能会导致后续元素的 prevlen 占用空间都发生变化，从而引起「连锁更新」问题，导致每个元素的空间都要重新分配，造成访问压缩列表性能的下降。</p><p>前面提到，压缩列表节点的 prevlen 属性会根据前一个节点的长度进行不同的空间大小分配：</p><ul><li>如果前一个<strong>节点的长度小于 254 字节</strong>，那么 prevlen 属性需要用<strong>1 字节的空间</strong>来保存这个长度值；</li><li>如果前一个<strong>节点的长度大于等于 254 字节</strong>，那么 prevlen 属性需要用<strong>5 字节的空间</strong>来保存这个长度值；</li></ul><p>现在假设一个压缩列表中有多个连续的、长度在 250～253 之间的节点，如下图：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast16.png alt=""></p><p>因为这些节点长度值小于 254 字节，所以 prevlen 属性需要用 1 字节的空间来保存这个长度值。</p><p>这时，如果将一个长度大于等于 254 字节的新节点加入到压缩列表的表头节点，即新节点将成为 e1 的前置节点，如下图：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast17.png alt=""></p><p>因为 e1 节点的 prevlen 属性只有 1 个字节大小，无法保存新节点的长度，此时就需要对压缩列表的空间重分配操作，并将 e1 节点的 prevlen 属性从原来的 1 字节大小扩展为 5 字节大小。</p><p>多米诺牌的效应就此开始。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast18.png alt=""></p><p>e1 原本的长度在 250～253 之间，因为刚才的扩展空间，此时 e1 的长度就大于等于 254 了，因此原本 e2 保存 e1 的 prevlen 属性也必须从 1 字节扩展至 5 字节大小。</p><p>正如扩展 e1 引发了对 e2 扩展一样，扩展 e2 也会引发对 e3 的扩展，而扩展 e3 又会引发对 e4 的扩展…. 一直持续到结尾。</p><p><strong>这种在特殊情况下产生的连续多次空间扩展操作就叫做「连锁更新」</strong>，就像多米诺牌的效应一样，第一张牌倒下了，推动了第二张牌倒下；第二张牌倒下，又推动了第三张牌倒下….，</p><h3 id=压缩列表的缺陷><a href=#压缩列表的缺陷 class=headerlink title=压缩列表的缺陷></a>压缩列表的缺陷</h3><p>空间扩展操作也就是重新分配内存，因此<strong>连锁更新一旦发生，就会导致压缩列表占用的内存空间要多次重新分配，这就会直接影响到压缩列表的访问性能</strong>。</p><p>所以说，<strong>虽然压缩列表紧凑型的内存布局能节省内存开销，但是如果保存的元素数量增加了，或是元素变大了，会导致内存重新分配，最糟糕的是会有「连锁更新」的问题</strong>。</p><p>因此，<strong>压缩列表只会用于保存的节点数量不多的场景</strong>，只要节点数量足够小，即使发生连锁更新，也是能接受的。</p><p>虽说如此，Redis 针对压缩列表在设计上的不足，在后来的版本中，新增设计了两种数据结构：quicklist（Redis 3.2 引入） 和 listpack（Redis 5.0 引入）。这两种数据结构的设计目标，就是尽可能地保持压缩列表节省内存的优势，同时解决压缩列表的「连锁更新」的问题。</p><h2 id=哈希表><a href=#哈希表 class=headerlink title=哈希表></a>哈希表</h2><p>哈希表是一种保存键值对（key-value）的数据结构。</p><p>哈希表中的每一个 key 都是独一无二的，程序可以根据 key 查找到与之关联的 value，或者通过 key 来更新 value，又或者根据 key 来删除整个 key-value等等。</p><p>在讲压缩列表的时候，提到过 Redis 的 Hash 对象的底层实现之一是压缩列表（最新 Redis 代码已将压缩列表替换成 listpack）。Hash 对象的另外一个底层实现就是哈希表。</p><p>哈希表优点在于，它<strong>能以 O(1) 的复杂度快速查询数据</strong>。怎么做到的呢？将 key 通过 Hash 函数的计算，就能定位数据在表中的位置，因为哈希表实际上是数组，所以可以通过索引值快速查询到数据。</p><p>但是存在的风险也是有，在哈希表大小固定的情况下，随着数据不断增多，那么<strong>哈希冲突</strong>的可能性也会越高。</p><p>解决哈希冲突的方式，有很多种。</p><p><strong>Redis 采用了「链式哈希」来解决哈希冲突</strong>，在不扩容哈希表的前提下，将具有相同哈希值的数据串起来，形成链接起，以便这些数据在表中仍然可以被查询到。</p><p>接下来，详细说说哈希表。</p><h3 id=哈希表结构设计><a href=#哈希表结构设计 class=headerlink title=哈希表结构设计></a>哈希表结构设计</h3><p>Redis 的哈希表结构如下：</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line>typedef struct dictht &#123;</span><br><span class=line>    <span class=comment>//哈希表数组</span></span><br><span class=line>    dictEntry **table;</span><br><span class=line>    <span class=comment>//哈希表大小</span></span><br><span class=line>    unsigned <span class=type>long</span> size;</span><br><span class=line>    <span class=comment>//哈希表大小掩码，用于计算索引值</span></span><br><span class=line>    unsigned <span class=type>long</span> sizemask;</span><br><span class=line>    <span class=comment>//该哈希表已有的节点数量</span></span><br><span class=line>    unsigned <span class=type>long</span> used;</span><br><span class=line>&#125; dictht;</span><br></pre></td></tr></table></figure><p>可以看到，哈希表是一个数组（dictEntry **table），数组的每个元素是一个指向「哈希表节点（dictEntry）」的指针。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast19.png alt=""></p><p>哈希表节点的结构如下：</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line>typedef struct dictEntry &#123;</span><br><span class=line>    <span class=comment>//键值对中的键</span></span><br><span class=line>    <span class=keyword>void</span> *key;</span><br><span class=line></span><br><span class=line>    <span class=comment>//键值对中的值</span></span><br><span class=line>    union &#123;</span><br><span class=line>        <span class=keyword>void</span> *val;</span><br><span class=line>        uint64_t u64;</span><br><span class=line>        int64_t s64;</span><br><span class=line>        <span class=type>double</span> d;</span><br><span class=line>    &#125; v;</span><br><span class=line>    <span class=comment>//指向下一个哈希表节点，形成链表</span></span><br><span class=line>    struct dictEntry *next;</span><br><span class=line>&#125; dictEntry;</span><br></pre></td></tr></table></figure><p>dictEntry 结构里不仅包含指向键和值的指针，还包含了指向下一个哈希表节点的指针，这个指针可以将多个哈希值相同的键值对链接起来，以此来解决哈希冲突的问题，这就是链式哈希。</p><p>另外，这里还跟你提一下，dictEntry 结构里键值对中的值是一个「联合体 v」定义的，因此，键值对中的值可以是一个指向实际值的指针，或者是一个无符号的 64 位整数或有符号的 64 位整数或double 类的值。这么做的好处是可以节省内存空间，因为当「值」是整数或浮点数时，就可以将值的数据内嵌在 dictEntry 结构里，无需再用一个指针指向实际的值，从而节省了内存空间。</p><h3 id=哈希冲突><a href=#哈希冲突 class=headerlink title=哈希冲突></a>哈希冲突</h3><p>哈希表实际上是一个数组，数组里多每一个元素就是一个哈希桶。</p><p>当一个键值对的键经过 Hash 函数计算后得到哈希值，再将(哈希值 % 哈希表大小)取模计算，得到的结果值就是该 key-value 对应的数组元素位置，也就是第几个哈希桶。</p><div class="note info simple"><p>什么是哈希冲突呢？</p></div><p>举个例子，有一个可以存放 8 个哈希桶的哈希表。key1 经过哈希函数计算后，再将「哈希值 % 8 」进行取模计算，结果值为 1，那么就对应哈希桶 1，类似的，key9 和 key10 分别对应哈希桶 1 和桶 6。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast20.png alt=""></p><p>此时，key1 和 key9 对应到了相同的哈希桶中，这就发生了哈希冲突。</p><p>因此，<strong>当有两个以上数量的 kay 被分配到了哈希表中同一个哈希桶上时，此时称这些 key 发生了冲突</strong>。</p><h3 id=链式哈希><a href=#链式哈希 class=headerlink title=链式哈希></a>链式哈希</h3><p>Redis 采用了「<strong>链式哈希</strong>」的方法来解决哈希冲突。</p><div class="note info simple"><p>链式哈希是怎么实现的？</p></div><p>实现的方式就是每个哈希表节点都有一个 next 指针，用于指向下一个哈希表节点，因此多个哈希表节点可以用 next 指针构成一个单项链表，<strong>被分配到同一个哈希桶上的多个节点可以用这个单项链表连接起来</strong>，这样就解决了哈希冲突。</p><p>还是用前面的哈希冲突例子，key1 和 key9 经过哈希计算后，都落在同一个哈希桶，链式哈希的话，key1 就会通过 next 指针指向 key9，形成一个单向链表。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast21 alt=""></p><p>不过，链式哈希局限性也很明显，随着链表长度的增加，在查询这一位置上的数据的耗时就会增加，毕竟链表的查询的时间复杂度是 O(n)。</p><p>要想解决这一问题，就需要进行 rehash，也就是对哈希表的大小进行扩展。</p><p>接下来，看看 Redis 是如何实现的 rehash 的。</p><h3 id=rehash><a href=#rehash class=headerlink title=rehash></a>rehash</h3><p>哈希表结构设计的这一小节，我给大家介绍了 Redis 使用 dictht 结构体表示哈希表。不过，在实际使用哈希表时，Redis 定义一个 dict 结构体，这个结构体里定义了<strong>两个哈希表（ht[2]）</strong>。</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line>typedef struct dict &#123;</span><br><span class=line>    …</span><br><span class=line>    <span class=comment>//两个Hash表，交替使用，用于rehash操作</span></span><br><span class=line>    dictht ht[<span class=number>2</span>];</span><br><span class=line>    …</span><br><span class=line>&#125; dict;</span><br></pre></td></tr></table></figure><p>之所以定义了 2 个哈希表，是因为进行 rehash 的时候，需要用上 2 个哈希表了。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast22.png alt=""></p><p>在正常服务请求阶段，插入的数据，都会写入到「哈希表 1」，此时的「哈希表 2 」 并没有被分配空间。</p><p>随着数据逐步增多，触发了 rehash 操作，这个过程分为三步：</p><ul><li>给「哈希表 2」 分配空间，一般会比「哈希表 1」 大 2 倍；</li><li>将「哈希表 1 」的数据迁移到「哈希表 2」 中；</li><li>迁移完成后，「哈希表 1 」的空间会被释放，并把「哈希表 2」 设置为「哈希表 1」，然后在「哈希表 2」 新创建一个空白的哈希表，为下次 rehash 做准备。</li></ul><p>为了方便你理解，我把 rehash 这三个过程画在了下面这张图：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast23.png alt=""></p><p>这个过程看起来简单，但是其实第二步很有问题，<strong>如果「哈希表 1 」的数据量非常大，那么在迁移至「哈希表 2 」的时候，因为会涉及大量的数据拷贝，此时可能会对 Redis 造成阻塞，无法服务其他请求</strong>。</p><h3 id=渐进式-rehash><a href=#渐进式-rehash class=headerlink title="渐进式 rehash"></a>渐进式 rehash</h3><p>为了避免 rehash 在数据迁移过程中，因拷贝数据的耗时，影响 Redis 性能的情况，所以 Redis 采用了<strong>渐进式 rehash</strong>，也就是将数据的迁移的工作不再是一次性迁移完成，而是分多次迁移。</p><p>渐进式 rehash 步骤如下：</p><ul><li>给「哈希表 2」 分配空间；</li><li><strong>在 rehash 进行期间，每次哈希表元素进行新增、删除、查找或者更新操作时，Redis 除了会执行对应的操作之外，还会顺序将「哈希表 1 」中索引位置上的所有 key-value 迁移到「哈希表 2」 上</strong>；</li><li>随着处理客户端发起的哈希表操作请求数量越多，最终在某个时间嗲呢，会把「哈希表 1 」的所有 key-value 迁移到「哈希表 2」，从而完成 rehash 操作。</li></ul><p>这样就巧妙地把一次性大量数据迁移工作的开销，分摊到了多次处理请求的过程中，避免了一次性 rehash 的耗时操作。</p><p>在进行渐进式 rehash 的过程中，会有两个哈希表，所以在渐进式 rehash 进行期间，哈希表元素的删除、查找、更新等操作都会在这两个哈希表进行。</p><p>比如，查找一个 key 的值的话，先会在「哈希表 1」 里面进行查找，如果没找到，就会继续到哈希表 2 里面进行找到。</p><p>另外，在渐进式 rehash 进行期间，新增一个 key-value 时，会被保存到「哈希表 2 」里面，而「哈希表 1」 则不再进行任何添加操作，这样保证了「哈希表 1 」的 key-value 数量只会减少，随着 rehash 操作的完成，最终「哈希表 1 」就会变成空表。</p><h3 id=rehash-触发条件><a href=#rehash-触发条件 class=headerlink title="rehash 触发条件"></a>rehash 触发条件</h3><p>介绍了 rehash 那么多，还没说什么时情况下会触发 rehash 操作呢？</p><p>rehash 的触发条件跟<strong>负载因子（load factor）</strong>有关系。</p><p>负载因子可以通过下面这个公式计算：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast24.png alt=""></p><p>触发 rehash 操作的条件，主要有两个：</p><ul><li><strong>当负载因子大于等于 1 ，并且 Redis 没有在执行 bgsave 命令或者 bgrewiteaof 命令，也就是没有执行 RDB 快照或没有进行 AOF 重写的时候，就会进行 rehash 操作</strong>。</li><li><strong>当负载因子大于等于 5 时，此时说明哈希冲突非常严重了，不管有没有有在执行 RDB 快照或 AOF 重写，都会强制进行 rehash 操作</strong>。</li></ul><h2 id=整数集合><a href=#整数集合 class=headerlink title=整数集合></a>整数集合</h2><p>整数集合是 Set 对象的底层实现之一。当一个 Set 对象只包含整数值元素，并且元素数量不时，就会使用整数集这个数据结构作为底层实现。</p><h3 id=整数集合结构设计><a href=#整数集合结构设计 class=headerlink title=整数集合结构设计></a>整数集合结构设计</h3><p>整数集合本质上是一块连续内存空间，它的结构定义如下：</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>typedef struct intset &#123;</span><br><span class=line>    <span class=comment>//编码方式</span></span><br><span class=line>    uint32_t encoding;</span><br><span class=line>    <span class=comment>//集合包含的元素数量</span></span><br><span class=line>    uint32_t length;</span><br><span class=line>    <span class=comment>//保存元素的数组</span></span><br><span class=line>    int8_t contents[];</span><br><span class=line>&#125; intset;</span><br></pre></td></tr></table></figure><p>可以看到，保存元素的容器是一个 contents 数组，虽然 contents 被声明为 int8_t 类型的数组，但是实际上 contents 数组并不保存任何 int8_t 类型的元素，contents 数组的真正类型取决于 intset 结构体里的 encoding 属性的值。比如：</p><ul><li>如果 encoding 属性值为 INTSET_ENC_INT16，那么 contents 就是一个 int16_t 类型的数组，数组中每一个元素的类型都是 int16_t；</li><li>如果 encoding 属性值为 INTSET_ENC_INT32，那么 contents 就是一个 int32_t 类型的数组，数组中每一个元素的类型都是 int32_t；</li><li>如果 encoding 属性值为 INTSET_ENC_INT64，那么 contents 就是一个 int64_t 类型的数组，数组中每一个元素的类型都是 int64_t；</li></ul><p>不同类型的 contents 数组，意味着数组的大小也会不同。</p><h3 id=整数集合的升级操作><a href=#整数集合的升级操作 class=headerlink title=整数集合的升级操作></a>整数集合的升级操作</h3><p>整数集合会有一个升级规则，就是当我们将一个新元素加入到整数集合里面，如果新元素的类型（int32_t）比整数集合现有所有元素的类型（int16_t）都要长时，整数集合需要先进行升级，也就是按新元素的类型（int32_t）扩展 contents 数组的空间大小，然后才能将新元素加入到整数集合里，当然升级的过程中，也要维持整数集合的有序性。</p><p>整数集合升级的过程不会重新分配一个新类型的数组，而是在原本的数组上扩展空间，然后在将每个元素按间隔类型大小分割，如果 encoding 属性值为 INTSET_ENC_INT16，则每个元素的间隔就是 16 位。</p><p>举个例子，假设有一个整数集合里有 3 个类型为 int16_t 的元素。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast25.png alt=""></p><p>现在，往这个整数集合中加入一个新元素 65535，这个新元素需要用 int32_t 类型来保存，所以整数集合要进行升级操作，首先需要为 contents 数组扩容，<strong>在原本空间的大小之上再扩容多 80 位（4x32-3x16=80），这样就能保存下 4 个类型为 int32_t 的元素</strong>。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast26.png alt=""></p><p>扩容完 contents 数组空间大小后，需要将之前的三个元素转换为 int32_t 类型，并将转换后的元素放置到正确的位上面，并且需要维持底层数组的有序性不变，整个转换过程如下：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast27.png alt=""></p><div class="note info simple"><p>整数集合升级有什么好处呢？</p></div><p>如果要让一个数组同时保存 int16_t、int32_t、int64_t 类型的元素，最简单做法就是直接使用 int64_t 类型的数组。不过这样的话，当如果元素都是 int16_t 类型的，就会造成内存浪费的情况。</p><p>整数集合升级就能避免这种情况，如果一直向整数集合添加 int16_t 类型的元素，那么整数集合的底层实现就一直是用 int16_t 类型的数组，只有在我们要将 int32_t 类型或 int64_t 类型的元素添加到集合时，才会对数组进行升级操作。</p><p>因此，整数集合升级的好处是<strong>节省内存资源</strong>。</p><div class="note info simple"><p>整数集合支持降级操作吗？</p></div><p><strong>不支持降级操作</strong>，一旦对数组进行了升级，就会一直保持升级后的状态。比如前面的升级操作的例子，如果删除了 65535 元素，整数集合的数组还是 int32_t 类型的，并不会因此降级为 int16_t 类型。</p><h2 id=跳表><a href=#跳表 class=headerlink title=跳表></a>跳表</h2><p>Redis 只有在 Zset 对象的底层实现用到了跳表，跳表的优势是能支持平均 O(logN) 复杂度的节点查找。</p><p>Zset 对象是唯一一个同时使用了两个数据结构来实现的 Redis 对象，这两个数据结构一个是跳表，一个是哈希表。这样的好处是既能进行高效的范围查询，也能进行高效单点查询。</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line>typedef struct zset &#123;</span><br><span class=line>    dict *dict;</span><br><span class=line>    zskiplist *zsl;</span><br><span class=line>&#125; zset;</span><br></pre></td></tr></table></figure><p>Zset 对象能支持范围查询（如 ZRANGEBYSCORE 操作），这是因为它的数据结构设计采用了跳表，而又能以常数复杂度获取元素权重（如 ZSCORE 操作），这是因为它同时采用了哈希表进行索引。</p><p>接下来，详细的说下跳表。</p><h3 id=跳表结构设计><a href=#跳表结构设计 class=headerlink title=跳表结构设计></a>跳表结构设计</h3><p>链表在查找元素的时候，因为需要逐一查找，所以查询效率非常低，时间复杂度是O(N)，于是就出现了跳表。<strong>跳表是在链表基础上改进过来的，实现了一种「多层」的有序链表</strong>，这样的好处是能快读定位数据。</p><p>那跳表长什么样呢？我这里举个例子，下图展示了一个层级为 3 的跳表。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast28.png alt=""></p><p>图中头节点有 L0~L2 三个头指针，分别指向了不同层级的节点，然后每个层级的节点都通过指针连接起来：</p><ul><li>L0 层级共有 5 个节点，分别是节点1、2、3、4、5；</li><li>L1 层级共有 3 个节点，分别是节点 2、3、5；</li><li>L2 层级只有 1 个节点，也就是节点 3 。</li></ul><p>如果我们要在链表中查找节点 4 这个元素，只能从头开始遍历链表，需要查找 4 次，而使用了跳表后，只需要查找 2 次就能定位到节点 4，因为可以在头节点直接从 L2 层级跳到节点 3，然后再往前遍历找到节点 4。</p><p>可以看到，这个查找过程就是在多个层级上跳来跳去，最后定位到元素。当数据量很大时，跳表的查找复杂度就是 O(logN)。</p><p>那跳表节点是怎么实现多层级的呢？这就需要看「跳表节点」的数据结构了，如下：</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre></td><td class=code><pre><span class=line>typedef struct zskiplistNode &#123;</span><br><span class=line>    <span class=comment>//Zset 对象的元素值</span></span><br><span class=line>    sds ele;</span><br><span class=line>    <span class=comment>//元素权重值</span></span><br><span class=line>    <span class=type>double</span> score;</span><br><span class=line>    <span class=comment>//后向指针</span></span><br><span class=line>    struct zskiplistNode *backward;</span><br><span class=line></span><br><span class=line>    <span class=comment>//节点的level数组，保存每层上的前向指针和跨度</span></span><br><span class=line>    struct zskiplistLevel &#123;</span><br><span class=line>        struct zskiplistNode *forward;</span><br><span class=line>        unsigned <span class=type>long</span> span;</span><br><span class=line>    &#125; level[];</span><br><span class=line>&#125; zskiplistNode;</span><br></pre></td></tr></table></figure><p>Zset 对象要同时保存元素和元素的权重，对应到跳表节点结构里就是 sds 类型的 ele 变量和 double 类型的 score 变量。每个跳表节点都有一个后向指针，指向前一个节点，目的是为了方便从跳表的尾节点开始访问节点，这样倒序查找时很方便。</p><p>跳表是一个带有层级关系的链表，而且每一层级可以包含多个节点，每一个节点通过指针连接起来，实现这一特性就是靠跳表节点结构体中的<strong>zskiplistLevel 结构体类型的 level 数组</strong>。</p><p>level 数组中的每一个元素代表跳表的一层，也就是由 zskiplistLevel 结构体表示，比如 leve[0] 就表示第一层，leve[1] 就表示第二层。zskiplistLevel 结构体里定义了「指向下一个跳表节点的指针」和「跨度」，跨度时用来记录两个节点之间的距离。</p><p>比如，下面这张图，展示了各个节点的跨度。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast29.png alt=""></p><p>第一眼看到跨度的时候，以为是遍历操作有关，实际上并没有任何关系，遍历操作只需要用前向指针就可以完成了。</p><p><strong>跨度实际上是为了计算这个节点在跳表中的排位</strong>。具体怎么做的呢？因为跳表中的节点都是按序排列的，那么计算某个节点排位的时候，从头节点点到该结点的查询路径上，将沿途访问过的所有层的跨度累加起来，得到的结果就是目标节点在跳表中的排位。</p><p>举个例子，查找图中节点 3 在跳表中的排位，从头节点开始查找节点 3，查找的过程只经过了一个层（L3），并且层的跨度是 3，所以节点 3 在跳表中的排位是 3。</p><p>另外，图中的头节点其实也是 zskiplistNode 跳表节点，只不过头节点的后向指针、权重、元素值都会被用到，所以图中省略了这部分。</p><p>问题来了，由谁定义哪个跳表节点是头节点呢？这就介绍「跳表」结构体了，如下所示：</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line>typedef struct zskiplist &#123;</span><br><span class=line>    struct zskiplistNode *header, *tail;</span><br><span class=line>    unsigned <span class=type>long</span> length;</span><br><span class=line>    <span class=type>int</span> level;</span><br><span class=line>&#125; zskiplist;</span><br></pre></td></tr></table></figure><p>跳表结构里包含了：</p><ul><li>跳表的头尾节点，便于在O(1)时间复杂度内访问跳表的头节点和尾节点；</li><li>跳表的长度，便于在O(1)时间复杂度获取跳表节点的数量；</li><li>跳表的最大层数，便于在O(1)时间复杂度获取跳表中层高最大的那个节点的层数量；</li></ul><h3 id=跳表节点查询过程><a href=#跳表节点查询过程 class=headerlink title=跳表节点查询过程></a>跳表节点查询过程</h3><p>查找一个跳表节点的过程时，跳表会从头节点的最高层开始，逐一遍历每一层。在遍历某一层的跳表节点时，会用跳表节点中的 SDS 类型的元素和元素的权重来进行判断，共有两个判断条件：</p><ul><li>如果当前节点的权重「小于」要查找的权重时，跳表就会访问该层上的下一个节点。</li><li>如果当前节点的权重「等于」要查找的权重时，并且当前节点的 SDS 类型数据「小于」要查找的数据时，跳表就会访问该层上的下一个节点。</li></ul><p>如果上面两个条件都不满足，或者下一个节点为空时，跳表就会使用目前遍历到的节点的 level 数组里的下一层指针，然后沿着下一层指针继续查找，这就相当于跳到了下一层接着查找。</p><p>举个例子，下图有个 3 层级的跳表。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast30.png alt=""></p><p>如果要查找「元素：abcd，权重：4」的节点，查找的过程是这样的：</p><ul><li>先从头节点的最高层开始，L2 指向了「元素：abc，权重：3」节点，这个节点的权重比要查找节点的小，所以要访问该层上的下一个节点；</li><li>但是该层上的下一个节点是空节点，于是就会跳到「元素：abc，权重：3」节点的下一层去找，也就是 leve[1];</li><li>「元素：abc，权重：3」节点的 leve[1] 的下一个指针指向了「元素：abcde，权重：4」的节点，然后将其和要查找的节点比较。虽然「元素：abcde，权重：4」的节点的权重和要查找的权重相同，但是当前节点的 SDS 类型数据「大于」要查找的数据，所以会继续跳到「元素：abc，权重：3」节点的下一层去找，也就是 leve[0]；</li><li>「元素：abc，权重：3」节点的 leve[0] 的下一个指针指向了「元素：abcd，权重：4」的节点，该节点正是要查找的节点，查询结束。</li></ul><h3 id=跳表节点层数设置><a href=#跳表节点层数设置 class=headerlink title=跳表节点层数设置></a>跳表节点层数设置</h3><p>跳表的相邻两层的节点数量的比例会影响跳表的查询性能。</p><p>举个例子，下图的跳表，第二层的节点数量只有 1 个，而第一层的节点数量有 6 个。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast31.png alt=""></p><p>这时，如果想要查询节点 6，那基本就跟链表的查询复杂度一样，就需要在第一层的节点中依次顺序查找，复杂度就是 O(N) 了。所以，为了降低查询复杂度，我们就需要维持相邻层结点数间的关系。</p><p><strong>跳表的相邻两层的节点数量最理想的比例是 2:1，查找复杂度可以降低到 O(logN)</strong>。</p><p>下图的跳表就是，相邻两层的节点数量的比例是 2 : 1。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast32.png alt=""></p><div class="note info simple"><p>那怎样才能维持相邻两层的节点数量的比例为 2 : 1 呢？</p></div><p>如果采用新增节点或者删除节点时，来调整跳表节点以维持比例的方法的话，会带来额外的开销。</p><p>Redis 则采用一种巧妙的方法是，<strong>跳表在创建节点的时候，随机生成每个节点的层数</strong>，并没有严格维持相邻两层的节点数量比例为 2 : 1 的情况。</p><p>具体的做法是，<strong>跳表在创建节点时候，会生成范围为[0-1]的一个随机数，如果这个随机数小于 0.25（相当于概率 25%），那么层数就增加 1 层，然后继续生成下一个随机数，直到随机数的结果大于 0.25 结束，最终确定该节点的层数</strong>。</p><p>这样的做法，相当于每增加一层的概率不超过 25%，层数越高，概率越低，层高最大限制是 64。</p><h2 id=quicklist><a href=#quicklist class=headerlink title=quicklist></a>quicklist</h2><p>在 Redis 3.0 之前，List 对象的底层数据结构是双向链表或者压缩列表。然后在 Redis 3.2 的时候，List 对象的底层改由 quicklist 数据结构实现。</p><p>其实 quicklist 就是「双向链表 + 压缩列表」组合，因为一个 quicklist 就是一个链表，而链表中的每个元素又是一个压缩列表。</p><p>在前面讲压缩列表的时候，我也提到了压缩列表的不足，虽然压缩列表是通过紧凑型的内存布局节省了内存开销，但是因为它的结构设计，如果保存的元素数量增加，或者元素变大了，压缩列表会有「连锁更新」的风险，一旦发生，会造成性能下降。</p><p>quicklist 解决办法，<strong>通过控制每个链表节点中的压缩列表的大小或者元素个数，来规避连锁更新的问题。因为压缩列表元素越少或越小，连锁更新带来的影响就越小，从而提供了更好的访问性能</strong>。</p><h3 id=quicklist-结构设计><a href=#quicklist-结构设计 class=headerlink title="quicklist 结构设计"></a>quicklist 结构设计</h3><p>quicklist 的结构体跟链表的结构体类似，都包含了表头和表尾，区别在于 quicklist 的节点是 quicklistNode。</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre></td><td class=code><pre><span class=line>typedef struct quicklist &#123;</span><br><span class=line>    <span class=comment>//quicklist的链表头</span></span><br><span class=line>    quicklistNode *head;      <span class=comment>//quicklist的链表头</span></span><br><span class=line>    <span class=comment>//quicklist的链表头</span></span><br><span class=line>    quicklistNode *tail;</span><br><span class=line>    <span class=comment>//所有压缩列表中的总元素个数</span></span><br><span class=line>    unsigned <span class=type>long</span> count;</span><br><span class=line>    <span class=comment>//quicklistNodes的个数</span></span><br><span class=line>    unsigned <span class=type>long</span> len;</span><br><span class=line>    ...</span><br><span class=line>&#125; quicklist;</span><br></pre></td></tr></table></figure><p>接下来看看，quicklistNode 的结构定义：</p><figure class="highlight java"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre></td><td class=code><pre><span class=line>typedef struct quicklistNode &#123;</span><br><span class=line>    <span class=comment>//前一个quicklistNode</span></span><br><span class=line>    struct quicklistNode *prev;     <span class=comment>//前一个quicklistNode</span></span><br><span class=line>    <span class=comment>//下一个quicklistNode</span></span><br><span class=line>    struct quicklistNode *next;     <span class=comment>//后一个quicklistNode</span></span><br><span class=line>    <span class=comment>//quicklistNode指向的压缩列表</span></span><br><span class=line>    unsigned <span class=type>char</span> *zl;</span><br><span class=line>    <span class=comment>//压缩列表的的字节大小</span></span><br><span class=line>    unsigned <span class=type>int</span> sz;</span><br><span class=line>    <span class=comment>//压缩列表的元素个数</span></span><br><span class=line>    unsigned <span class=type>int</span> count : <span class=number>16</span>;        <span class=comment>//ziplist中的元素个数</span></span><br><span class=line>    ....</span><br><span class=line>&#125; quicklistNode;</span><br></pre></td></tr></table></figure><p>可以看到，quicklistNode 结构体里包含了前一个节点和下一个节点指针，这样每个 quicklistNode 形成了一个双向链表。但是链表节点的元素不再是单纯保存元素值，而是保存了一个压缩列表，所以 quicklistNode 结构体里有个指向压缩列表的指针 *zl。</p><p>我画了一张图，方便你理解 quicklist 数据结构。</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast33.png alt=""></p><p>在向 quicklist 添加一个元素的时候，不会像普通的链表那样，直接新建一个链表节点。而是会检查插入位置的压缩列表是否能容纳该元素，如果能容纳就直接保存到 quicklistNode 结构里的压缩列表，如果不能容纳，才会新建一个新的 quicklistNode 结构。</p><p>quicklist 会控制 quicklistNode 结构里的压缩列表的大小或者元素个数，来规避潜在的连锁更新的风险，但是这并没有完全解决连锁更新的问题。</p><h2 id=listpack><a href=#listpack class=headerlink title=listpack></a>listpack</h2><p>quicklist 虽然通过控制 quicklistNode 结构里的压缩列表的大小或者元素个数，来减少连锁更新带来的性能影响，但是并没有完全解决连锁更新的问题。</p><p>因为 quicklistNode 还是用了压缩列表来保存元素，压缩列表连锁更新的问题，来源于它的结构设计，所以要想彻底解决这个问题，需要设计一个新的数据结构。</p><p>于是，Redis 在 5.0 新设计一个数据结构叫 listpack，目的是替代压缩列表，它最大特点是 listpack 中每个节点不再包含前一个节点的长度了，压缩列表每个节点正因为需要保存前一个节点的长度字段，就会有连锁更新的隐患。</p><p>我看了 Redis 的 Github，在最新 6.2 发行版本中，Redis Hash 对象、Set 对象的底层数据结构的压缩列表还未被替换成 listpack，而 Redis 的最新代码（还未发布版本）已经将所有用到压缩列表底层数据结构的 Redis 对象替换成 listpack 数据结构来实现，估计不久将来，Redis 就会发布一个将压缩列表为 listpack 的发行版本。</p><h3 id=listpack-结构设计><a href=#listpack-结构设计 class=headerlink title="listpack 结构设计"></a>listpack 结构设计</h3><p>listpack 采用了压缩列表的很多优秀的设计，比如还是用一块连续的内存空间来紧凑地保存数据，并且为了节省内存的开销，listpack 节点会采用不同的编码方式保存不同大小的数据。</p><p>我们先看看 listpack 结构：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast34.png alt=""></p><p>listpack 头包含两个属性，分别记录了 listpack 总字节数和元素数量，然后 listpack 末尾也有个结尾标识。图中的 listpack entry 就是 listpack 的节点了。</p><p>每个 listpack 节点结构如下：</p><p><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2023/01/redis_fast35.png alt=""></p><p>主要包含三个方面内容：</p><ul><li>encoding，定义该元素的编码类型，会对不同长度的整数和字符串进行编码；</li><li>data，实际存放的数据；</li><li>len，encoding+data的总长度；</li></ul><p>可以看到，<strong>listpack 没有压缩列表中记录前一个节点长度的字段了，listpack 只记录当前节点的长度，当我们向 listpack 加入一个新元素的时候，不会影响其他节点的长度字段的变化，从而避免了压缩列表的连锁更新问题</strong>。</p></article><div class=post-copyright><div class=post-copyright__author_group><a class=post-copyright__author_img href=/about/ data-pjax-state><img class="post-copyright__author_img_back entered loaded" src=/img/avatar.ico alt=author onerror='this.onerror=null,this.src="https://img.lovelu.top/hexo-blog/img/404.png"'></a><div class=post-copyright__author_name>满心记</div><div class=post-copyright__author_desc>分享技术与生活</div></div><div class=post-tools id=post-tools><div class=post-tools-left><div class=post-reward onclick=AddRewardMask()><div class="reward-button button--animated" title=打赏作者><i class="mxfont icon-hand-heart-fill"></i>打赏作者</div><div class=reward-main><ul class=reward-all><span class=reward-title>感谢你赐予我前进的力量</span><ul class=reward-group><li class=reward-item><a href=https://img.lovelu.top/hexo-blog/img/wechat.png target=_blank><img class="post-qr-code-img entered loaded" alt=微信 src=https://img.lovelu.top/hexo-blog/img/wechat.png></a><div class=post-qr-code-desc>微信</div></li><li class=reward-item><a href=https://img.lovelu.top/hexo-blog/img/alipay.png target=_blank><img class="post-qr-code-img entered loaded" alt=支付宝 src=https://img.lovelu.top/hexo-blog/img/alipay.png></a><div class=post-qr-code-desc>支付宝</div></li></ul><a class=reward-main-btn href=/about/ target=_blank><div class=reward-text>打赏者名单</div><div class=reward-dec>因为你们的支持让我意识到写文章的价值🙏</div></a></ul></div></div><div class="reward-link mode"><a class=reward-link-button href=/wechat/ data-pjax-state><i class="mxfont icon-plant-fill"></i>订阅</a></div></div></div><div class=post-copyright__notice><span class=post-copyright-info>本文是转载文章，版权归原作者所有。建议访问原文，转载本文请联系原作者</span></div></div><div class=post-bottom-tools><div class=post-tools-left><div class=tag_share><div class=post-meta__tag-list><a class=post-meta__tags href=/tags/%E6%95%99%E7%A8%8B/ ><span class=tags-punctuation>教程</span><span class=tagsPageCount>68</span></a><a class=post-meta__tags href=/tags/%E5%BC%80%E5%8F%91/ ><span class=tags-punctuation>开发</span><span class=tagsPageCount>30</span></a></div></div></div><div class=post-tools-right><a class=post-report href=/comments rel="external nofollow" title=反馈与投诉>反馈与投诉</a></div></div><nav class="pagination-post needEndHide show-window" id=pagination><div class="prev-post pull-left"><a href=/p/5ed3.html><div class=pagination-info><div class=label>上一篇</div><div class=prev_info>博客魔改教程：在中控台添加帧率显示功能</div></div></a></div><div class="next-post pull-right"><a href=/p/d4c8.html><div class=pagination-info><div class=label>下一篇</div><div class=next_info>秀玉西餐厅：典雅环境，美味佳肴，物超所值！</div></div></a></div></nav><div class=relatedPosts><div class=headline><i class="mxfont icon-star-smile-fill"></i><span>喜欢这篇文章的人也看了</span><div class=relatedPosts-link><a onclick=toRandomPost() href=javascript:void(0); rel="external nofollow">随便逛逛</a></div></div><div class=relatedPosts-list><div><a href=/p/8c637907.html title=Java8新特性Optional：简化代码处理空指针异常><img class="cover entered loading" src=https://img.lovelu.top/2022/12/luoji_gaizao.webp alt=cover><div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i>2022-10-09</div><div class=title>Java8新特性Optional：简化代码处理空指针异常</div></div></a></div><div><a href=/p/f660.html title=Java获取IP归属地信息的方法><img class="cover entered loading" src=https://img.lovelu.top/2023/03/gsd_cover.png alt=cover><div class="content is-center"><div class=date><i class="far fa-calendar-alt fa-fw"></i>2022-08-10</div><div class=title>Java获取IP归属地信息的方法</div></div></a></div></div></div><hr><div id=post-comment><div class=comment-head><div class=comment-headline><i class="mxfont icon-chat-1-fill"></i><span>评论</span><span id=twikoo-counts></span></div><div class=comment-randomInfo><a onclick=Jay.addRandomCommentInfo() href=# rel=nofollow data-pjax-state=external>匿名评论</a></div><div class=comment-privacy><a href=/privacy/ >隐私政策</a></div><div class=comment-tips id=comment-tips><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class=comment-wrap><div><div id=twikoo-wrap></div></div></div></div></div><div class=aside-content id=aside-content><div class="card-widget card-info"><div class=card-content><div class="card-info-avatar is-center"><div class=author-info__top-group><div class=author-info__sayhi id=author-info__sayhi onclick=Jay.changeSayHelloText()></div></div></div><div class=avatar-img-group><img class="avatar-img nolazyload entered loaded" src=https://img.lovelu.top/hexo-blog/welcome.gif onerror='this.onerror=null,this.src="https://img.lovelu.top/hexo-blog/img/404.png"' alt=avatar><div class=avatar-sticker><img class="avatar-sticker-img nolazyload entered loaded" src=https://img.lovelu.top/hexo-blog/img/smile.png onerror='this.onerror=null,this.src="https://img.lovelu.top/hexo-blog/img/404.png"' alt=smile></div></div><div class=author-info__description_group><div class=author-info__description>这里有关于<b>开发</b>、<b>运维</b>、<b>架构</b>相关问题的经验和看法，还有<b>生活</b>和<b>美食</b>的分享。<br>相信你在这里能有所<b>收获</b><br><b>追求让人充实，分享让人快乐</b>。</div></div><div class=author-info__bottom-group><a class=author-info__bottom-group-left href=/about/ ><div class=author-info__name>满心记</div><div class=author-info__desc>分享技术与生活</div></a><div class="card-info-social-icons is-center"><a class=social-icon href=https://github.com/helloqibin target=_blank title=Github><i class="mxfont icon-github-line"></i></a><a class=social-icon href=https://gitee.com/helloqibin_admin target=_blank title=Gitee><i class="mxfont icon-gitee"></i></a></div></div></div></div><div class=sticky_layout><div class=card-widget id=card-toc><div class=item-headline><i class="mxfont icon-menu-fill"></i><span>目录</span></div><div class=toc-content><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%AD%A3%E6%96%87><span class=toc-text>正文</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E9%94%AE%E5%80%BC%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F><span class=toc-text>键值对数据库是怎么实现的？</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#SDS><span class=toc-text>SDS</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#SDS-%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1><span class=toc-text>SDS 结构设计</span></a><ol class=toc-child><li class="toc-item toc-level-4"><a class=toc-link href=#O%EF%BC%881%EF%BC%89%E5%A4%8D%E6%9D%82%E5%BA%A6%E8%8E%B7%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6><span class=toc-text>O（1）复杂度获取字符串长度</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E5%85%A8><span class=toc-text>二进制安全</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E4%B8%8D%E4%BC%9A%E5%8F%91%E7%94%9F%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA><span class=toc-text>不会发生缓冲区溢出</span></a></li><li class="toc-item toc-level-4"><a class=toc-link href=#%E8%8A%82%E7%9C%81%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4><span class=toc-text>节省内存空间</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E9%93%BE%E8%A1%A8><span class=toc-text>链表</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%93%BE%E8%A1%A8%E8%8A%82%E7%82%B9%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1><span class=toc-text>链表节点结构设计</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%93%BE%E8%A1%A8%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1><span class=toc-text>链表结构设计</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%93%BE%E8%A1%A8%E7%9A%84%E4%BC%98%E5%8A%BF%E4%B8%8E%E7%BC%BA%E9%99%B7><span class=toc-text>链表的优势与缺陷</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%8E%8B%E7%BC%A9%E5%88%97%E8%A1%A8><span class=toc-text>压缩列表</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%8E%8B%E7%BC%A9%E5%88%97%E8%A1%A8%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1><span class=toc-text>压缩列表结构设计</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%BF%9E%E9%94%81%E6%9B%B4%E6%96%B0><span class=toc-text>连锁更新</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%8E%8B%E7%BC%A9%E5%88%97%E8%A1%A8%E7%9A%84%E7%BC%BA%E9%99%B7><span class=toc-text>压缩列表的缺陷</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%93%88%E5%B8%8C%E8%A1%A8><span class=toc-text>哈希表</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%93%88%E5%B8%8C%E8%A1%A8%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1><span class=toc-text>哈希表结构设计</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%93%88%E5%B8%8C%E5%86%B2%E7%AA%81><span class=toc-text>哈希冲突</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%93%BE%E5%BC%8F%E5%93%88%E5%B8%8C><span class=toc-text>链式哈希</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#rehash><span class=toc-text>rehash</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%B8%90%E8%BF%9B%E5%BC%8F-rehash><span class=toc-text>渐进式 rehash</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#rehash-%E8%A7%A6%E5%8F%91%E6%9D%A1%E4%BB%B6><span class=toc-text>rehash 触发条件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%95%B4%E6%95%B0%E9%9B%86%E5%90%88><span class=toc-text>整数集合</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%95%B4%E6%95%B0%E9%9B%86%E5%90%88%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1><span class=toc-text>整数集合结构设计</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%95%B4%E6%95%B0%E9%9B%86%E5%90%88%E7%9A%84%E5%8D%87%E7%BA%A7%E6%93%8D%E4%BD%9C><span class=toc-text>整数集合的升级操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%B7%B3%E8%A1%A8><span class=toc-text>跳表</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%B7%B3%E8%A1%A8%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1><span class=toc-text>跳表结构设计</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%B7%B3%E8%A1%A8%E8%8A%82%E7%82%B9%E6%9F%A5%E8%AF%A2%E8%BF%87%E7%A8%8B><span class=toc-text>跳表节点查询过程</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%B7%B3%E8%A1%A8%E8%8A%82%E7%82%B9%E5%B1%82%E6%95%B0%E8%AE%BE%E7%BD%AE><span class=toc-text>跳表节点层数设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#quicklist><span class=toc-text>quicklist</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#quicklist-%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1><span class=toc-text>quicklist 结构设计</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#listpack><span class=toc-text>listpack</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#listpack-%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1><span class=toc-text>listpack 结构设计</span></a></li></ol></li></ol></div></div><div class="card-widget jay-right-widget wechat" id=card-wechat onclick='pjax.loadUrl("/wechat/")'><div id=flip-wrapper><div id=flip-content><div class=face></div><div class="back face"></div></div></div></div><div class="card-widget card-power"><div class=item-headline><i class="mxfont icon-aifadian"></i><span>爱发电赞助</span><a class=power-charge href=https://afdian.net/a/mxhrn rel="external nofollow" target=_blank title=赞助博主>赞助</a></div><a id=power-star><div id=power-star-image></div><div class=power-star-body><div id=power-star-title></div><div id=power-star-desc></div></div></a><div class=power-list><div class=power-item><div class=power-item-body><div class=power-item-link><a target=_blank href=https://blog.lovelu.top rel="external nofollow">满心记</a></div><div class=power-item-link><a target=_blank href=http://blog.manxin.site rel="external nofollow">糖果屋</a></div><div class=power-item-link><a target=_blank href=https://lovelu.top rel="external nofollow">官网</a></div></div></div></div></div><div class="card-widget card-recent-post"><div class=item-headline><i class="mxfont icon-map-2-line"></i><span>最近发布</span></div><div class=aside-list><div class=aside-list-item><a class=thumbnail href=/p/e23ab292.html title=彗星云跑路了><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2024/07/paolu_cover.webp onerror='this.onerror=null,this.src="https://img.lovelu.top/hexo-blog/img/404.png"' alt=彗星云跑路了></a><div class=content><a class=article-recent_post_categories href=/p/e23ab292.html title=彗星云跑路了>经验分享</a><a class=title href=/p/e23ab292.html title=彗星云跑路了>彗星云跑路了</a><time datetime=2024-07-04T03:45:15.000Z title="发表于 2024-07-04 11:45:15">2024-07-04</time></div></div><div class=aside-list-item><a class=thumbnail href=/p/596c9ceb.html title=使用Aspose.Words将word转PDF并添加公章><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2024/07/apose_cover.png onerror='this.onerror=null,this.src="https://img.lovelu.top/hexo-blog/img/404.png"' alt=使用Aspose.Words将word转PDF并添加公章></a><div class=content><a class=article-recent_post_categories href=/p/596c9ceb.html title=使用Aspose.Words将word转PDF并添加公章>网络技术</a><a class=title href=/p/596c9ceb.html title=使用Aspose.Words将word转PDF并添加公章>使用Aspose.Words将word转PDF并添加公章</a><time datetime=2024-07-01T02:43:10.000Z title="发表于 2024-07-01 10:43:10">2024-07-01</time></div></div><div class=aside-list-item><a class=thumbnail href=/p/146ebd6.html title=重新启用我的小米手环5><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2024/07/mihuan_cover.webp onerror='this.onerror=null,this.src="https://img.lovelu.top/hexo-blog/img/404.png"' alt=重新启用我的小米手环5></a><div class=content><a class=article-recent_post_categories href=/p/146ebd6.html title=重新启用我的小米手环5>好物推荐</a><a class=title href=/p/146ebd6.html title=重新启用我的小米手环5>重新启用我的小米手环5</a><time datetime=2024-07-01T02:14:53.000Z title="发表于 2024-07-01 10:14:53">2024-07-01</time></div></div><div class=aside-list-item><a class=thumbnail href=/p/85560c4e.html title=端午抽空去东湖磨山风景区走了一圈><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2024/06/donghu_cover.jpg onerror='this.onerror=null,this.src="https://img.lovelu.top/hexo-blog/img/404.png"' alt=端午抽空去东湖磨山风景区走了一圈></a><div class=content><a class=article-recent_post_categories href=/p/85560c4e.html title=端午抽空去东湖磨山风景区走了一圈>生活日常</a><a class=title href=/p/85560c4e.html title=端午抽空去东湖磨山风景区走了一圈>端午抽空去东湖磨山风景区走了一圈</a><time datetime=2024-06-11T06:12:25.000Z title="发表于 2024-06-11 14:12:25">2024-06-11</time></div></div><div class=aside-list-item><a class=thumbnail href=/p/db10a71.html title="今天去看了部电影 - 维和部队"><img src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=https://img.lovelu.top/2024/06/weihebudui_cover.jpg onerror='this.onerror=null,this.src="https://img.lovelu.top/hexo-blog/img/404.png"' alt="今天去看了部电影 - 维和部队"></a><div class=content><a class=article-recent_post_categories href=/p/db10a71.html title="今天去看了部电影 - 维和部队">观影历程</a><a class=title href=/p/db10a71.html title="今天去看了部电影 - 维和部队">今天去看了部电影 - 维和部队</a><time datetime=2024-06-07T07:19:15.000Z title="发表于 2024-06-07 15:19:15">2024-06-07</time></div></div></div></div></div></div></main><footer id=footer><div id=mx-footer-banner><div class=footer-logo><i class="mxfont icon-mxlogo" style=font-size:30px></i></div><div class=footer-banner-description>来自 满心 最新技术与生活的文章</div><a class=footer-banner-link href=/ data-pjax-state=data-pjax-state>了解更多</a></div><div id=footer_deal><a class=deal_link href=mailto:manxin@lovelu.top title=mail><i class="mxfont icon-mail-line"></i></a><a class=deal_link href=https://space.bilibili.com/1500727556 title=哔哩哔哩 target=_blank><i class="mxfont icon-bilibili-line"></i></a><a class=deal_link href=https://weibo.com/u/6220311811 title=微博 target=_blank><i class="mxfont icon-weibo-line"></i></a><a class=deal_link href=https://github.com/helloqibin title=github target=_blank><i class="mxfont icon-github-line"></i></a><img class="footer_mini_logo entered loading" style=border-radius:50% src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-lazy-src=/img/footer/bear.gif onclick=btf.scrollToDest(0,500) title=回顶部><a class=deal_link target=_blank rel=noopener href=https://blog.csdn.net/helloqibin title=csdn><i class="mxfont icon-csdn"></i></a><a class=deal_link href=https://www.zhihu.com/people/manXin title=知乎 target=_blank><i class="mxfont icon-zhihu"></i></a><a class=deal_link href=https://gitee.com/helloqibin_admin title=gitee target=_blank><i class="mxfont icon-gitee"></i></a><a class=deal_link href="https://www.douyin.com/user/MS4wLjABAAAAlqZWmVJwbWLK30Ah3rHJIK_vKhxMz3ndBPPB-8HC_Ms?showTab=post" title=tiktok target=_blank><i class="mxfont icon-tiktok"></i></a></div><div id=Jay-footer><div class=footer-group><h3 class=footer-title>直达</h3><div class=footer-links><a class=footer-item href=https://lovelu.top target=_blank>满心官网</a><a class=footer-item href=/archives/ >全部文章</a><a class=footer-item href=/tags/ >全部标签</a><a class=footer-item href=/echarts/ >文章统计</a></div></div><div class=footer-group><h3 class=footer-title>生活</h3><div class=footer-links><a class=footer-item href=/music/ >音乐分享</a><a class=footer-item href=/movies/ >观影之旅</a><a class=footer-item href=/gallery/ >宝藏相册</a><a class=footer-item target=_blank rel=noopener href=https://www.lovelu.top>满心资源网</a></div></div><div class=footer-group><h3 class=footer-title>导航</h3><div class=footer-links><a class=footer-item href=/essay/ >即刻短文</a><a class=footer-item href=/stars/ >网址收藏</a><a class=footer-item href=/moments/ >友链文章</a><a class=footer-item href=/update/ >更新日志</a></div></div><div class=footer-group><h3 class=footer-title>服务</h3><div class=footer-links><a class=footer-item href=https://v6.51.la/ target=_blank>51la统计</a><a class=footer-item href=https://www.foreverblog.cn/treaty.html target=_blank>十年之约</a><a class=footer-item href=https://bf.zzxworld.com/s/714 target=_blank>BlogFinder</a><a class=footer-item href=https://www.lovelu.top/forums target=_blank>满心论坛</a></div></div><div class=footer-group><h3 class=footer-title>协议</h3><div class=footer-links><a class=footer-item href=/privacy/ >隐私协议</a><a class=footer-item href=/cookies/ >Cookie</a><a class=footer-item href=/cc/ >版权协议</a></div></div><div class=footer-group><div class=footer-title-group><h3 class=footer-title>友链</h3><a class=random-friends-btn href=javascript:Jay.addFriendLinksInFooter();><i class="mxfont icon-refresh-line"></i></a></div><div class=footer-links id=friend-links-in-footer></div></div></div><div id=footer-banner><div class=footer-banner-links><div class=footer-banner-left><div class=footer-banner-left><div id=footer-banner-tips></div><div class=copyright><span class=year>©2022 - 2024 By</span><a class=footer-banner-link target=_blank href=https://lovelu.top/ rel="external nofollow">满心记</a></div></div></div><div class=footer-banner-right><a class=footer-banner-link href=/wechat title=RSS>订阅</a><a class=footer-banner-link target=_blank rel=noopener href=https://github.com/jerryc127/hexo-theme-butterfly title=theme>主题</a><a class=footer-banner-link target=_blank rel=noopener href=https://beian.miit.gov.cn/ title=备案>鄂ICP备2022011660号</a><a class="footer-banner-link cc" href=/cc/ title=cc协议><i class="mxfont icon-copyright-line"></i><i class="mxfont icon-creative-commons-by-line"></i><i class="mxfont icon-creative-commons-nc-line"></i><i class="mxfont icon-creative-commons-nd-line"></i></a></div></div></div><div id=cookies-window><div class=cookies-window-title>协议提醒助手</div><div class=cookies-window-content><span class=cookies-tip>查看本站为你的个人隐私做出的努力</span><a class=cookies-link href=/privacy/ title=本站如何保护你的隐私><i class="mxfont icon-arrow-right-circle-fill"></i></a></div></div><div id=quit-box onclick=RemoveRewardMask()></div><div class="comment-barrage needEndHide"></div></footer></div><div id=rightside><div id=rightside-config-hide><button id=readmode type=button title=阅读模式><i class="fas fa-book-open"></i></button><button id=translateLink type=button title=简繁转换>繁</button><button id=hide-aside-btn type=button title=单栏和双栏切换><i class="mxfont icon-side-bar-fill"></i></button></div><div id=rightside-config-show><button id=rightside_config type=button title=设置><i class="fas fa-cog fa-spin"></i></button><button class=close id=mobile-toc-button type=button title=目录><i class="fas fa-list-ul"></i></button><a id=to_comment href=#post-comment title=直达评论><i class="fas fa-comments"></i></a><button id=go-up type=button title=回到顶部><i class="mxfont icon-arrow-up-line"></i></button></div></div><div id=algolia-search style=zoom:1><div class=search-dialog><div class=search-dialog__title id=algolia-search-title>搜索</div><div id=algolia-input-panel><div id=algolia-search-input></div></div><div id=algolia-search-results><div id=algolia-hits><a class=tag-list href=/tags/闲聊/ >闲聊</a><a class=tag-list href=/tags/日常/ >日常</a><a class=tag-list href=/tags/评测/ >评测</a><a class=tag-list href=/tags/美食/ >美食</a><a class=tag-list href=/tags/教程/ >教程</a><a class=tag-list href=/tags/知识/ >知识</a><a class=tag-list href=/tags/运维/ >运维</a><a class=tag-list href=/tags/办公/ >办公</a><a class=tag-list href=/tags/软件/ >软件</a></div><div id=algolia-pagination></div><div id=algolia-stats></div></div><div id=algolia-tips><i class="mxfont icon-algolia"></i><span class=algolia-tips-text>Algolia 提供搜索服务</span></div><span class=search-close-button><i class="mxfont icon-close-fill"></i></span></div><div id=search-mask></div></div><div class=js-pjax><div id=rightMenu><div class="rightMenu-group rightMenu-small"><div class=rightMenu-item id=menu-backward><i class="mxfont icon-arrow-left-line"></i></div><div class=rightMenu-item id=menu-forward><i class="mxfont icon-arrow-right-line"></i></div><div class=rightMenu-item id=menu-refresh><i class="mxfont icon-restart-line" style=font-size:19px></i></div><div class=rightMenu-item id=menu-top><i class="mxfont icon-arrow-up-line"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class=rightMenu-item id=menu-copytext><i class="mxfont icon-file-copy-fill"></i><span>复制选中文本</span></div><div class=rightMenu-item id=menu-pastetext><i class="mxfont icon-clipboard-fill"></i><span>粘贴文本</span></div><a class=rightMenu-item id=menu-commenttext href=#><i class="mxfont icon-chat-new-fill"></i><span>引用到评论</span></a><div class=rightMenu-item id=menu-newwindow><i class="mxfont icon-window-fill"></i><span>新窗口打开</span></div><div class=rightMenu-item id=menu-copylink><i class="mxfont icon-link"></i><span>复制链接地址</span></div><div class=rightMenu-item id=menu-copyimg><i class="mxfont icon-file-copy-fill"></i><span>复制此图片</span></div><div class=rightMenu-item id=menu-downloadimg><i class="mxfont icon-download-cloud-fill"></i><span>下载此图片</span></div><div class=rightMenu-item id=menu-search><i class="mxfont icon-search-2-line"></i><span>站内搜索</span></div><div class=rightMenu-item id=menu-searchBaidu><i class="mxfont icon-baidu-fill"></i><span>百度搜索</span></div><div class=rightMenu-item id=menu-music-toggle><i class="mxfont icon-play-fill"></i><span>播放音乐</span></div><div class=rightMenu-item id=menu-music-back><i class="mxfont icon-skip-back-fill"></i><span>切换到上一首</span></div><div class=rightMenu-item id=menu-music-forward><i class="mxfont icon-skip-forward-fill"></i><span>切换到下一首</span></div><div class=rightMenu-item id=menu-music-playlist onclick='window.open("https://music.163.com/#/discover/toplist?id=3778678","_blank")'><i class="mxfont icon-play-list-2-line"></i><span>查看所有歌曲</span></div><div class=rightMenu-item id=menu-music-copyMusicName><i class="mxfont icon-file-copy-fill"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id=menu-randomPost href=#><i class="mxfont icon-suiji-artic"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href=/category/ ><i class="mxfont icon-checkbox-multiple-blank-fill"></i><span>文章分类</span></a><a class="rightMenu-item menu-link" href=/tags/ ><i class="mxfont icon-price-tag-3-fill"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item menu-link" href=/privacy/ ><i class="mxfont icon-shield-user-fill"></i><span>隐私协议</span></a><a class="rightMenu-item menu-link" href=/cc/ ><i class="mxfont icon-creative-commons-fill"></i><span>版权协议</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><div class=rightMenu-item id=menu-copy><i class="mxfont icon-external-link-fill"></i><span>复制地址</span></div><div class=rightMenu-item id=menu-commentBarrage><i class="mxfont icon-chat-1-fill"></i><span class=menu-commentBarrage-text>关闭热评</span></div><div class=rightMenu-item id=menu-darkmode><i class="mxfont icon-moon-clear-fill"></i><span class=menu-darkmode-text>显示模式</span></div><div class=rightMenu-item id=menu-translate><i class="mxfont icon-panben"></i><span>轉為繁體</span></div></div></div><div id=rightmenu-mask></div></div><div style=zoom:1><script src=/js/utils.js></script><script src=/js/main.js></script><script src=/ ></script><script charset=utf-8 data-pjax="" src=/mx/blogex.js></script><script charset=utf-8 data-pjax="" src=/js/recentcomments.js></script><script src=/js/pjax.min.js></script><script src=/js/tw_cn.js></script><script src=https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js></script><script src=/plugin/algolia/instantpage.min.js type=module></script><script src=/plugin/lazyload.iife.min.js></script><script src=https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.js></script><script src=/plugin/winbox/winbox.bundle.min.js></script><link rel=stylesheet href=/plugin/winbox/winbox.css media=print onload='this.media="all"'><script src=https://cdn.staticfile.org/algoliasearch/4.14.2/algoliasearch-lite.umd.min.js></script><script defer src=/plugin/algolia/instantsearch.min.js></script><script defer src=/plugin/algolia/algolia.js></script><script src=/plugin/twikoo.all.min.js></script><script>const preloader={endLoading:()=>{document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()}),setTimeout((function(){preloader.endLoading()}),3e3),document.addEventListener("pjax:send",()=>{preloader.initLoading()}),document.addEventListener("pjax:complete",()=>{preloader.endLoading()})</script><div class=js-pjax><script>(()=>{const t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.lovelu.top",region:"true",onCommentLoaded:function(){document.querySelectorAll(".tk-action-link").forEach(t=>{const o=t.querySelectorAll(".tk-action-icon");if(o.length>0){const t=document.createElement("i");t.className="mxfont icon-chat-1-fill tk-action-icon",o[0].parentNode.replaceChild(t,o[0]);for(let t=1;t<o.length;t++)o[t].parentNode.removeChild(o[t])}})}},null)),GLOBAL_CONFIG_SITE.isPost&&(()=>{var t=document.getElementById("twikoo-counts");const o=document.getElementById("twikoo-count");o&&twikoo.getCommentsCount({envId:"https://twikoo.lovelu.top",region:"true",urls:[window.location.pathname],includeReply:!1}).then((function(e){o.innerText=e[0].count,t.innerText="（"+e[0].count+"）"})).catch((function(t){console.error(t)}))})()},o=()=>{"object"!=typeof twikoo?getScript("/").then(t):setTimeout(t,0)};o()})()</script></div><script>window.addEventListener("load",()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++){t+="<div class='aside-list-item'>";{const a="data-lazy-src";t+=`<a href='${e[n].url}' class='thumbnail'><img class="entered loaded" ${a}='${e[n].avatar}' alt='${e[n].nick}'><div class='name'><span>${e[n].nick}</span></div></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}' title='${e[n].content}'>${e[n].content}</a>\n        <time datetime="${e[n].date}">${btf.diffDate(e[n].date,!0)}</time></div></div>`}else t+="没有评论";let n=document.querySelector("#card-newest-comments .aside-list");n.innerHTML=t,window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("twikoo-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{twikoo.getRecentComments({envId:"https://twikoo.lovelu.top",region:"true",pageSize:6,includeReply:!0}).then((function(t){const n=t.map(e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()};var t});saveToLocal.set("twikoo-newest-comments",JSON.stringify(n),10/1440),e(n)})).catch((function(e){document.querySelector("#card-newest-comments .aside-list").innerHTML="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof twikoo?t():getScript("/").then(t)})()}};t(),document.addEventListener("pjax:complete",t)})</script><canvas id=universe></canvas><script async src=/js/color/dark.js></script><link rel=stylesheet href=/plugin/aplayer/APlayer.min.css media=print onload='this.media="all"'><script src=/plugin/aplayer/APlayer.min.js></script><script src=/plugin/aplayer/Meting2.min.js></script><script src=/ ></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script data-pjax="" src=/mx/rightmenu.js></script><script data-pjax="" src=/plugin/swiper/swiper-bundle.min.js></script><script data-pjax="" src=/plugin/comment/commentBarrage.js></script></div><div class=js-pjax><script>coverColor(),addRightMenuClickEvent(),navTitle(),percent(),listenToPageInputPress(),Jay.topPostScroll(),Jay.topCategoriesBarScroll(),Jay.topGroupScroll(),Jay.consoleCommentScroll(),Jay.sayhi(),Jay.addTag(),Jay.stopImgRightDrag(),Jay.qrcodeCreate(),Jay.hidecookie(),Jay.onlyHome(),Jay.addNavBackgroundInit(),Jay.initIndexEssay(),Jay.changeTimeInEssay(),Jay.initThemeColor()</script></div></body></html><script>var posts=["p/ff752fdc.html","p/816b27c.html","p/96a5d92d.html","p/9247e6d3.html","p/d4c2f93a.html","p/64a8.html","p/8c5ea92c.html","p/68e5d18f.html","p/207c.html","p/7f1.html","p/a3f37c27.html","p/5043.html","p/8fbb3fc2.html","p/8c637907.html","p/f660.html","p/c8df.html","p/df3c8f67.html","p/10d3.html","p/ec98943c.html","p/92b6997b.html","p/c7e1e4cb.html","p/a0e8.html","p/2cfc.html","p/fe80.html","p/57d3.html","p/ff279933.html","p/dbdb.html","p/bf07.html","p/870360f2.html","p/655ed0ae.html","p/a9c7.html","p/11f7.html","p/ea527932.html","p/6c6f.html","p/ecb91705.html","p/40fc.html","p/e3ed06ed.html","p/52d3c29d.html","p/107556a8.html","p/104df43e.html","p/e7e53934.html","p/4d4beb5a.html","p/c7d183f1.html","p/10621433.html","p/1d9b.html","p/2a897ea0.html","p/db10a71.html","p/e838.html","p/d2943d79.html","p/596c9ceb.html","p/25bb.html","p/df654d98.html","p/b02a.html","p/d5c1.html","p/6075.html","p/2283405.html","p/64616ee4.html","p/f326b6ab.html","p/cb79cb9f.html","p/8755594c.html","p/9c805e75.html","p/66453cde.html","p/5842951e.html","p/3d56.html","p/ac39.html","p/a18ab0da.html","p/5449d4b5.html","p/bbd3f9f5.html","p/91889fc9.html","p/cbec.html","p/bede17e7.html","p/dfab4aff.html","p/5029.html","p/350b967d.html","p/6a84b5f.html","p/f3cc.html","p/5ed3.html","p/96aa.html","p/c6311a70.html","p/13c66fb7.html","p/b23d80ec.html","p/6e5cf553.html","p/aca6.html","p/c777a152.html","p/63b8.html","p/bc7f.html","p/29451363.html","p/cbdc1289.html","p/59d0cc8.html","p/1383.html","p/116f.html","p/f02c71f8.html","p/2f50.html","p/5635.html","p/afe498a2.html","p/d23e7a42.html","p/801b72eb.html","p/31993464.html","p/5c2d31c8.html","p/a637269.html","p/6b3ac260.html","p/aab3.html","p/b254.html","p/5b0fa66b.html","p/dbea5e88.html","p/b19d9d82.html","p/e23ab292.html","p/ed40.html","p/3ad1ce11.html","p/d84.html","p/cc11360e.html","p/37ed.html","p/54eb093.html","p/36ad.html","p/18547b8d.html","p/3be43534.html","p/3cadb328.html","p/9afea749.html","p/2b0a6698.html","p/461136d1.html","p/3a05c8ed.html","p/9297f496.html","p/782d0633.html","p/9a72f70b.html","p/b8058fb7.html","p/13d7ab12.html","p/82c1.html","p/d6ce.html","p/a01c6fdc.html","p/6cdd.html","p/131d046c.html","p/24b21cdf.html","p/aeff.html","p/67b2.html","p/8b8bbe6f.html","p/bddc67f8.html","p/f9206260.html","p/7218d2cf.html","p/edb16c8e.html","p/d4c8.html","p/69e1b8f9.html","p/3f0468f0.html","p/bd8cb47c.html","p/d29f23e9.html","p/85560c4e.html","p/3440cd70.html","p/69c1c6c4.html","p/752f6b2.html","p/9599ca6d.html","p/1c84757a.html","p/5986a040.html","p/49ab.html","p/89459fe9.html","p/ddcb1723.html","p/1f170eb.html","p/1e49.html","p/c909.html","p/773c4640.html","p/7a59.html","p/f95edda2.html","p/146ebd6.html","p/dce31480.html"];function toRandomPost(){window.pjax?pjax.loadUrl("/"+posts[Math.floor(Math.random()*posts.length)]):window.open("/"+posts[Math.floor(Math.random()*posts.length)],"_self")}</script><script>function getRandomFlink(t){let o=[{name:"满心记",link:"https://blog.lovelu.top",avatar:"https://img.lovelu.top/hexo-blog/img/logo.webp",descr:"追求让人充实，分享让人快乐",tag:"生活",siteshot:"https://img.lovelu.top/2022/12/siteshot.webp"},{name:"Jayhrn",link:"https://blog.lvhrn.cn",avatar:"https://img.lovelu.top/2023/06/jay_logo.webp",descr:"念念不忘，必有回响",siteshot:"https://img.lovelu.top/2023/03/jay_siteshot.webp",tag:"技术"},{name:"张洪Heo",link:"https://blog.zhheo.com/",avatar:"https://img.lovelu.top/2023/03/heo_logo.png",descr:"分享设计与科技生活",siteshot:"https://img.lovelu.top/2023/03/heo_siteshot.png",tag:"生活"},{name:"Akilarの糖果屋",link:"https://akilar.top/",siteshot:"https://img.lovelu.top/2023/02/akilar_siteshot.jpg",avatar:"https://img.lovelu.top/2023/02/akilar_logo.jpg",descr:"欢迎光临糖果屋",tag:"技术"},{name:"安知鱼",link:"https://blog.anheyu.com/",siteshot:"https://img.lovelu.top/2023/03/anzhiy_siteshot.jpg",avatar:"https://img.lovelu.top/2023/03/anzhiyu_logo.jpg",descr:"生活明朗，万物可爱",tag:"技术"},{name:"小志IT",link:"https://www.xzmcz.cn",avatar:"https://img.lovelu.top/2023/03/xiaozhi.jpg",descr:"一个致力于安全领域的全栈博主",siteshot:"https://img.lovelu.top/2023/06/xiaozhi_siteshot.png",tag:"技术"},{name:"小冰",link:"https://zfe.space/",avatar:"https://img.lovelu.top/2023/03/xb_logo.png",descr:"做个有梦想的人！",tag:"技术",siteshot:"https://img.lovelu.top/2023/03/xb_siteshot.webp"},{name:"小康",link:"https://www.antmoe.com/",avatar:"https://img.lovelu.top/2023/02/xiaokang_logo.jpg",descr:"一个收藏回忆与分享技术的地方！",siteshot:"https://img.lovelu.top/2023/03/xiaokang_siteshot.webp",tag:"技术"},{name:"iMaeGoo",link:"https://www.imaegoo.com",avatar:"https://img.lovelu.top/2023/03/goo_logo.png",descr:"虹墨空间站",siteshot:"https://img.lovelu.top/2023/03/goo_siteshot.webp",tag:"技术"},{name:"Eurkon",link:"https://blog.eurkon.com",avatar:"https://img.lovelu.top/2023/03/eurkon_logo.jpg",descr:"不只是代码的搬运工",siteshot:"https://img.lovelu.top/2023/03/eurkon_siteshot.webp",tag:"技术"},{name:"风记星辰",link:"https://www.thyuu.com/",avatar:"https://img.lovelu.top/2023/03/fjxc_logo.jpg",descr:"优秀设计交互及生活的博客",siteshot:"https://img.lovelu.top/2023/03/fjxc_siteshot.jpg",tag:"生活"},{name:"贰猹",link:"https://noionion.top/",avatar:"https://img.lovelu.top/2023/03/erzha_logo.jpg",descr:"用这生命中的每一秒，给自己一个不后悔的未来",siteshot:"https://img.lovelu.top/2023/03/erzha_siteshot.png",tag:"技术"},{name:"Black Flies",link:"https://www.yyyzyyyz.cn/",avatar:"https://img.lovelu.top/2023/03/bf_logo.jpg",descr:"When nothing goes right,just go left.",siteshot:"https://img.lovelu.top/2023/03/bf_siteshot.webp",tag:"技术"},{name:"七鳄の学习格",link:"https://blog.gmcj0816.top/",avatar:"https://img.lovelu.top/2023/03/gmcj_logo.jpg",descr:"如果世界多了精彩，每一位都是创造者，大家都是你的观众",siteshot:"https://img.lovelu.top/2023/03/gmcj_siteshot.png",tag:"技术"},{name:"杜老师说",link:"https://dusays.com",avatar:"https://img.lovelu.top/2023/03/du_logo.png",descr:"综合性很强的网站，以及图床服务",siteshot:"https://img.lovelu.top/2023/03/du_siteshot.jpg",tag:"技术"},{name:"Adil",link:"https://blog.adil.com.cn",avatar:"https://img.lovelu.top/2023/04/adil_logo.png",descr:"BW/HANA顾问,BI工程师,数据分析师,数据科学家",siteshot:"https://img.lovelu.top/2023/04/adil_siteshut.png",tag:"技术"},{name:"JumpServer",link:"https://www.fit2cloud.com/jumpserver/index.html",avatar:"https://img.lovelu.top/2023/03/fit_logo.ico",descr:"JumpServer 是全球首款开源的堡垒机，是符合 4A 的专业运维安全审计系统",power:!0,tag:"发电"},{name:"公爵书房",link:"https://blog.gjcloak.top/",avatar:"https://img.lovelu.top/2023/03/gjsf.jpg",descr:"以指键之轻，承载知识之重",power:!0},{name:"小红",link:"https://dhjdd.cn/",avatar:"https://img.lovelu.top/2023/03/xh_logo.png",descr:"代码改变世界🎈"},{name:"小莫唐尼",link:"https://b.925i.cn",avatar:"https://img.lovelu.top/2023/03/xm_logo.webp",descr:"一个爱凑热闹的、喜欢捣鼓前端的博主"},{name:"M酷",link:"https://bbchin.com",avatar:"https://img.lovelu.top/2023/03/mku_logo.jpg",descr:"专注技术的博客"},{name:"Halo",link:"https://www.halo.run/archives",avatar:"https://img.lovelu.top/2023/03/halo_logo.png",descr:"一款现代化的博客/CMS系统，值得一试"},{name:"柠檬zz7",link:"https://www.codeui.top",avatar:"https://img.lovelu.top/2023/02/zz7_logo.jpg",descr:"自学技术分享"},{name:"吃猫的鱼",link:"https://www.fish9.cn",avatar:"https://img.lovelu.top/2023/03/fish_logo.png",descr:"一个优质的技术博客！"},{name:"花隐间",link:"https://yeas.fun",avatar:"https://img.lovelu.top/2023/03/fun_logo.png",descr:"言归文字外，意出有无间"},{name:"工作笔记",link:"https://www.haoba.cc",avatar:"https://img.lovelu.top/2023/03/gzbi_logo.jpg",descr:"集结工作前端和全栈技术、行业视野、技巧总结，个人生活与摄影，养成记录和分享的习惯"},{name:"心流",link:"https://blog.panghai.top",avatar:"https://img.lovelu.top/2023/03/xl_logo.webp",descr:"保持谨慎，保持乐观"},{name:"网友小宋",link:"https://xyzbz.cn/",avatar:"https://img.lovelu.top/2024/04/wyxs_logo.png",descr:"一介草民，只为生活！"},{name:"小N同学",link:"https://www.imcharon.com/",avatar:"https://img.lovelu.top/2023/03/xn_logo.png",descr:"青石落晚巷 故人未还乡"},{name:"Leonus",link:"https://blog.leonus.cn/",avatar:"https://img.lovelu.top/2023/03/leonus_logo.jpg",descr:"进一寸有进一寸的欢喜",recom:!0,tag:"荐"},{name:"Ariasaka",link:"https://yisous.xyz",avatar:"https://img.lovelu.top/2023/03/xw_logo.jpg",descr:"人有悲欢离合 月有阴晴圆缺"},{name:"山岳库博",link:"https://kmar.top/",avatar:"https://img.lovelu.top/2023/02/kubo_logo.png",descr:"开发学习启发性二刺螈",recom:!0,tag:"荐"},{name:"Mxne",link:"https://blog.mxne.cn/",avatar:"https://img.lovelu.top/2023/03/lmx_logo.png",descr:"学如逆水行舟，不进则退"},{name:"Shine",link:"https://blog.shineyu.cn/",avatar:"https://img.lovelu.top/2023/03/shineyu_logo.webp",descr:"热爱生活点滴，分享时刻精彩"},{name:"轻笑Chuckle",link:"https://qcqx.cn",avatar:"https://img.lovelu.top/2023/03/qx_logo.webp",descr:"漫天倾尘，风中轻笑",recom:!0,tag:"荐"},{name:"space of Lee",link:"https://blog.lyt11.cn/",avatar:"https://img.lovelu.top/2023/03/tlfd_logo.jpg",descr:"桃李春风一杯酒"},{name:"金鳞星溅",link:"https://jinlinxingjian.top/",avatar:"https://img.lovelu.top/2023/03/jlxj_logo.jpg",descr:"黄河一去不复返"},{name:"小飞",link:"https://www.xffjs.com",avatar:"https://img.lovelu.top/2023/03/xiaofei.png",descr:"生活明朗,万物可爱,人间值得,未来可期"},{name:"纯情",link:"https://blog.xiaohack.org",avatar:"https://img.lovelu.top/2023/02/chunqing_logo.png",descr:"专注于前端开发与程序拓展的资源分享平台"},{name:"火星人de基地",link:"https://blog.qianxuechao.cn",avatar:"https://img.lovelu.top/2023/03/hxjd_logo.png",descr:"记录火星人在地球上的生活"},{name:"Tianli",link:"https://tianli-blog.club",avatar:"https://img.lovelu.top/2023/03/tianli_logo.jpg",descr:"惟其不可能，所以才相信"},{name:"李程ic",link:"https://www.licic.net",avatar:"https://img.lovelu.top/2023/04/licheng_logo.png",descr:"中华人民共和国万岁"},{name:"PandaX",link:"https://pandax.wiki",avatar:"https://img.lovelu.top/2023/03/panda_logo.png",descr:"生命不息，折腾不止"},{name:"慕雪的寒舍",link:"https://blog.musnow.top/",avatar:"https://img.lovelu.top/2023/03/muxue_logo.png",descr:"爱折腾的代码初学者"},{name:"张时贰",link:"https://zhsher.cn/",avatar:"https://img.lovelu.top/2023/04/shier_logo.png",descr:"环转码，爱敲代码的小张"},{name:"小张同学",link:"https://www.blog.xiaozhangstu.com/",avatar:"https://img.lovelu.top/2023/04/xzj_logo.png",descr:"吃嘛嘛香，学啥啥费"},{name:"枫叶",link:"https://blog.aqcoder.cn",avatar:"https://img.lovelu.top/2023/04/fengye_logo.png",descr:"分享知识，认识世界"},{name:"L1nSn0w's",link:"https://blog.linsnow.cn",avatar:"https://img.lovelu.top/2023/04/l1n_logo.png",descr:"无限进步"},{name:"Ethan.Tzy",link:"https://fe32.top/",avatar:"https://img.lovelu.top/2023/04/tzy_logo.png",descr:"古今之成大事者，不惟有超世之才，亦必有坚忍不拔之志",recom:!0,tag:"荐"},{name:"飞鸟",link:"https://lzxjack.top",avatar:"https://img.lovelu.top/2023/04/fn_logo.png",descr:"一只平凡的鸟罢了"},{name:"Zestaken",link:"https://www.zestaken.top",avatar:"https://img.lovelu.top/2023/04/zest_logo.png",descr:"自由的代价"},{name:"十玖八柒",link:"https://blog.ahzoo.cn/",avatar:"https://img.lovelu.top/2023/04/987_logo.png",descr:"每天进步多一点"},{name:"麦当",link:"http://www.maidang.cool",avatar:"https://img.lovelu.top/2023/04/maidang_logo.png",descr:"人生若只如初见，何事秋风悲画扇"},{name:"王先森",link:"https://www.boysec.cn",avatar:"https://img.lovelu.top/2023/04/wxs_logo.png",descr:"运维与安全从业者"},{name:"赵阿卷",link:"https://blog.zwying.com",avatar:"https://img.lovelu.top/2023/04/zaj_logo.png",descr:"花有重开日，人无再少年"},{name:"凡梦星尘",link:"https://lisenhui.cn",avatar:"https://img.lovelu.top/2023/04/fmxc_logo.png",descr:"再平凡的人也有属于他的梦想"},{name:"Colsrch",link:"https://colsrch.cn",avatar:"https://img.lovelu.top/2023/04/col_logo.png",descr:"愿多年以后，我可以酌一杯清酒，烂醉如泥，梦中回到我们的曾经"},{name:"本当迷",link:"https://www.bdmcom.cn/",avatar:"https://img.lovelu.top/2023/04/bdm_logo.png",descr:"人丑嘴不甜长得唠嗑还没钱的00后博客"},{name:"Ogo’s",link:"https://wyxogo.top/",avatar:"https://img.lovelu.top/2023/04/yuexin_logo.png",descr:"KEEP WALKING"},{name:"CasecoRI",link:"https://www.casecori.top/",avatar:"https://img.lovelu.top/2023/04/case_logo.png",descr:"高智熵博主"},{name:"Whisper",link:"https://blog.whispery.cn/",avatar:"https://img.lovelu.top/2023/04/whis_logo.png",descr:"我们的忧愁将会崩解，灵魂将会穿梭如风"},{name:"梦落",link:"https://blog.dreamfall.cn",avatar:"https://img.lovelu.top/2023/04/mengluo_logo.png",descr:"因为不可能，所以才值得相信"},{name:"陶小桃",link:"https://www.52txr.cn",avatar:"https://img.lovelu.top/2023/04/txt_logo.png",descr:"热衷于分享技术的机械专业小哥哥"},{name:"MJ's",link:"https://blog.justlovesmile.top",avatar:"https://img.lovelu.top/2023/04/mj_logo.png",descr:"醒亦念卿，梦亦念卿"},{name:"OY",link:"https://oy6090.top/",avatar:"https://img.lovelu.top/2023/04/oy_logo.png",descr:"放弃不难，但坚持一定很酷"},{name:"HalfA",link:"https://www.mahaofei.com/",avatar:"https://img.lovelu.top/2023/04/half_logo.png",descr:"无限进步"},{name:"Yw",link:"https://yww52.com/",avatar:"https://img.lovelu.top/2023/04/yww52_logo.png",descr:"永远相信美好的事情即将发生"},{name:"tsuki",link:"https://www.tsuk1.cn",avatar:"https://img.lovelu.top/2023/04/tsuki_logo.png",descr:"悟已往之不谏，知来者可追"},{name:"sheerkvc",link:"https://sheerkvc.top/",avatar:"https://img.lovelu.top/2023/04/sheerk_logo.png",descr:"脱离低级趣味"},{name:"花猪",link:"https://cnhuazhu.top/butterfly",avatar:"https://img.lovelu.top/2023/04/huazhu_logo.png",descr:"佛系青年"},{name:"星空下的YZY",link:"https://226yzy.com",avatar:"https://img.lovelu.top/2023/04/yzy_logo.png",descr:"记录一枚菜鸟的征程"},{name:"清絮",link:"https://blog.linioi.com/",avatar:"https://img.lovelu.top/2023/04/qingsu_logo.png",descr:"人生如逆旅，我亦是行人"},{name:"刺时代",link:"https://www.subera.net",avatar:"https://img.lovelu.top/2023/04/cisd_logo.png",descr:"记录学习、生活和有趣的事"},{name:"王同学",link:"https://demo.wxz666.icu/",avatar:"https://img.lovelu.top/2023/04/wtx_logo.png",descr:"须知少时凌云志，曾许人间第一流"},{name:"刘洪亮",link:"https://lhliang.com",avatar:"https://img.lovelu.top/2023/04/lhl_logo.png",descr:"不忘初心，方得始终"},{name:"GanSer",link:"https://www.gan1ser.top/",avatar:"https://img.lovelu.top/2023/04/ganserr_logo.png",descr:"紫箫吟断，素笺恨切"},{name:"困困鱼",link:"https://moony.la/",avatar:"https://img.lovelu.top/2023/05/kky_logo.png",descr:"喜欢捣鼓的博主"},{name:"夜雨炊烟",link:"https://yychuiyan.com/",avatar:"https://img.lovelu.top/2023/06/yycy_logo.png",descr:"三餐烟火暖，四季皆安然"},{name:"圆弧派",link:"https://www.iarc.top/",avatar:"https://img.lovelu.top/2023/06/yuanhu_logo.png",descr:"始于开源，终于完美"},{name:"Mycpen",link:"https://blog.cpen.top/",avatar:"https://img.lovelu.top/2023/07/mycpen_logo.png",descr:"这是一个有趣的博客"},{name:"Echo",link:"https://www.liveout.cn/",avatar:"https://img.lovelu.top/2023/07/echo_logo.png",descr:"漂泊于互联中的一个小窝"},{name:"GuKaifeng",link:"https://gukaifeng.cn/",avatar:"https://img.lovelu.top/2023/07/gukaifeng_logo.png",descr:"一个刚入门的分布式存储研发工程师"},{name:"快乐小凳凳",link:"https://www.dqywy.top/",avatar:"https://img.lovelu.top/2023/07/dqywy_logo.png",descr:"Sow nothing, reap nothing"},{name:"懒觉猫先生",link:"https://blog.luoaicheng.cn/",avatar:"https://img.lovelu.top/2023/07/luoaicheng_logo.png",descr:"睡觉睡觉，睡觉睡觉，喵喵"},{name:"祈杰",link:"https://qijieya.cn/",avatar:"https://img.lovelu.top/2023/12/qijieya_logo.png",descr:"英桀们的谢幕 必须盛大而壮丽"},{name:"绯鞠",link:"https://loli.fj.cn",avatar:"https://img.lovelu.top/2023/07/loli_logo.png",descr:"一只爱折腾的绯鞠"},{name:"杀死一只知更鸟",link:"https://www.shangjidong.com",avatar:"https://img.lovelu.top/2023/07/zgn_logo.png",descr:"前端技术分享、前端学习记录"},{name:"青笺画卿颜",link:"https://blog.qjhqy.com",avatar:"https://img.lovelu.top/2023/07/senyu_logo.png",descr:"鸢语慕君年"},{name:"寒烟志",link:"https://yanyuplus.cn/",avatar:"https://img.lovelu.top/2023/07/fqxc_logo.png",descr:"半山腰总是挤的，你得去山顶看看"},{name:"牛牛技术客栈",link:"https://www.nnjskz.cn/",avatar:"https://img.lovelu.top/2023/07/niuniu_logo.png",descr:"学习改变命运，分享创造价值"},{name:"Qeem",link:"http://itstarqeem.space",avatar:"https://img.lovelu.top/2023/07/qeen_logo.png",descr:"阿巴阿巴"},{name:"夏夜小鹿",link:"https://xiayexiaolu.top/",avatar:"https://img.lovelu.top/2023/08/xyxl_logo.png",descr:"夏夜小鹿，是夏，也是露"},{name:"樱花小镇",link:"https://blog.sakura.vin",avatar:"https://img.lovelu.top/2023/08/yhxz_logo.png",descr:"小园新种红樱树，闲绕花枝便当游"},{name:"云晓晨CatchYXC",link:"https://blog.catchyun.com",avatar:"https://img.lovelu.top/2023/08/catchwang_logo.png",descr:"未来路长 · 勿忘初心"},{name:"小林的小破站",link:"https://blog.lucksss.com/",avatar:"https://img.lovelu.top/2023/08/lucksss_logo.png",descr:"我们总是在相同的路上 却看到了不同的风景"},{name:"CODE-R",link:"https://www.xiaolinboke.com",avatar:"https://img.lovelu.top/2023/09/xiaolinboke_logo.png",descr:"分享前端开发技术"},{name:"玖涯",link:"https://blog.nineya.com",avatar:"https://img.lovelu.top/2023/09/jiuya_logo.png",descr:"投资未来的人，是忠于现实的人",recom:!0,tag:"荐"},{name:"玖月云",link:"https://halo.vlo.cc",avatar:"https://img.lovelu.top/2023/09/vlo_logo.png",descr:"行穿锦巷入雪巷，看尽桃花到李花"},{name:"千帆暮雨",link:"https://qiandao.space",avatar:"https://img.lovelu.top/2023/09/qingdao_logo.png",descr:"我欲乘风归去,不留半点痕迹"},{name:"Fomalhaut",link:"https://www.fomal.cc/",avatar:"https://img.lovelu.top/2023/09/fomal_logo.png",descr:"Future is now"},{name:"又见苍岚",link:"https://www.zywvvd.com",avatar:"https://img.lovelu.top/2023/09/zywvvd_logo.png",descr:"蓝天依旧，明眸如初",recom:!0,tag:"荐"},{name:"竹山一叶",link:"https://zsyyblog.com",avatar:"https://img.lovelu.top/2023/09/zsyy_logo.png",descr:"来了就不想走的小家"},{name:"江咏之",link:"https://jiangsihan.cn",avatar:"https://img.lovelu.top/2023/09/jiangshihan_logo.png",descr:"江一铭，字咏之，号逍遥居士"},{name:"雷雷屋头",link:"https://ll.sc.cn",avatar:"https://img.lovelu.top/2023/09/llsc_logo.png",descr:"爱生活，爱工作，爱折腾"},{name:"小窝哟",link:"https://blog.528688.cn/",avatar:"https://img.lovelu.top/2023/09/528688_logo.png",descr:"积累知识、积累兴趣的地方"},{name:"zzmr",link:"https://blog.zzmr.club/",avatar:"https://img.lovelu.top/2023/09/zzmr_cover.png",descr:"生活随想曲"},{name:"未知之旅",link:"https://blog.xenosp.cn/",avatar:"https://img.lovelu.top/2023/09/xenosp_logo.png",descr:"在未知中成长，超越自我"},{name:"自游鱼",link:"https://www.ziyouyu.cn",avatar:"https://img.lovelu.top/2023/10/ziyouyu_logo.png",descr:"记录生活和学习的点滴"},{name:"三毛笔记",link:"https://aboss.top",avatar:"https://img.lovelu.top/2023/11/aboss_logo.png",descr:"喜欢编程头发渐少，仅剩三根拒绝秃顶"},{name:"夜雨柠檬",link:"https://blog.yeyulemon.top/",avatar:"https://img.lovelu.top/2023/11/yeyulemon_logo.png",descr:"生于忧患，死于安乐"},{name:"HiPeach",link:"https://blog.opeach.cn",avatar:"https://img.lovelu.top/2023/11/opeach_logo.png",descr:"妙不可言"},{name:"呆鱼",link:"https://daiyu.fun/",avatar:"https://img.lovelu.top/2023/12/daiyu_logo.png",descr:"Hello World"},{name:"小鹿个人站",link:"https://www.siena.zone",avatar:"https://img.lovelu.top/2023/12/siena_logo.png",descr:"跳吧，在无比宏大的星系"},{name:"虹色轨迹",link:"https://dil.illlli.com",avatar:"https://img.lovelu.top/2023/12/illlli_logo.png",descr:"做一颗星星，有棱有角，黑暗中闪闪发光"},{name:"东东的小黑盒",link:"https://www.ankia.top",avatar:"https://img.lovelu.top/2023/12/ankia_logo.png",descr:"生活未必似你所见"},{name:"阳小楊",link:"https://blog.yxyang.top/",avatar:"https://img.lovelu.top/2023/12/yxyang_logo.png",descr:"无人了解你的灵魂"},{name:"白雾茫茫",link:"https://baiwumm.com/",avatar:"https://img.lovelu.top/2023/04/baiwu_logo.png",descr:"记录学习、生活和有趣的事"},{name:"林墨白",link:"https://blog.lmb520.cn/",avatar:"https://img.lovelu.top/2023/03/lmb_logo.png",descr:"沉墨满纸，一笑若白"},{name:"Mcenahle",link:"https://mcenahle.com",avatar:"https://img.lovelu.top/2024/01/mcenahle_logo.png",descr:"以技术为主，偶尔会记录生活趣事"},{name:"兔子蜀黍",link:"https://3139.top",avatar:"https://img.lovelu.top/2024/03/3139_logo.png",descr:"一建二建软考资料及建站交流"},{name:"Pzai",link:"https://blog.pzai.cloud/",avatar:"https://img.lovelu.top/2024/02/pzai_logo.png",descr:"从入门到放弃"},{name:"八六说",link:"https://22230.cn/",avatar:"https://img.lovelu.top/2024/02/86662_logo.png",descr:"记录与分享生活和工作的方方面面"},{name:"清羽飞扬",link:"https://blog.qyliu.top/",avatar:"https://img.lovelu.top/2024/03/qyliu_logo.png",descr:"柳影曳曳，清酒孤灯，扬笔撒墨，心境如霜"},{name:"爱吃肉的猫",link:"https://meuicat.com/",avatar:"https://img.lovelu.top/2023/03/meuicat_logo.png",descr:"有肉有猫有生活"},{name:"御网尚书",link:"https://www.siteweb.cn/",avatar:"https://img.lovelu.top/2023/09/siteweb_logo.png",descr:"愿以赤子之心，共建网络空间安全"},{name:"神经蛙",link:"https://hexo.sjava.cn/",avatar:"https://img.lovelu.top/2023/07/shenjinwa_logo.png",descr:"种一棵树最好的时间是十年前，其次是现在"},{name:"海底涝里没有鱼",link:"https://smileszh.cn",avatar:"https://img.lovelu.top/2023/07/smileszh_logo.png",descr:"平安喜乐，万事胜意"},{name:"Superhero",link:"https://www.app966.cn/",avatar:"https://img.lovelu.top/2023/04/super_logo.png",descr:"夜色难免黑凉，前行必有曙光"},{name:"超逸の",link:"https://yangchaoyi.vip/blog",avatar:"https://img.lovelu.top/2023/04/chaoyi_logo.png",descr:"学如逆水行舟，不进则退"},{name:"斯文孙",link:"https://www.vhrise.com",avatar:"https://img.lovelu.top/2024/03/vhrise_logo.png",descr:"人生中有些事你不竭尽所能去做，你永远不知道自己有多出色！"},{name:"漫川的成长日记",link:"https://www.mancs.cn/",avatar:"https://img.lovelu.top/2023/03/bena_logo.png",descr:"记录生活中有趣的事情"},{name:"故事的程序猿",link:"https://blog.lichenghao.cn",avatar:"https://img.lovelu.top/2024/04/lichenghao_logo.png",descr:"好好学习，天天向上↑"},{name:"小城故事",link:"https://webxc.eu.org",avatar:"https://img.lovelu.top/2023/04/xcgs_logo.png",descr:"欢迎光临小城故事"},{name:"云深处",link:"https://blog.likesrt.com",avatar:"https://img.lovelu.top/2024/04/likesrt_logo.png",descr:"只在此山中，云深不知处"},{name:"王卓Sco",link:"https://www.efu.me/",avatar:"https://img.lovelu.top/2023/12/wzsco_logo.png",descr:"宁静致远，热爱生活"},{name:"爱吃猫的鱼",link:"https://blog.talen.top/",avatar:"https://img.lovelu.top/2024/05/talen_logo.png",descr:"前景可待 未来可期"},{name:"ZHWEI",link:"https://blog.zhwei.tech/",avatar:"https://img.lovelu.top/2024/06/zhwei_logo.png",descr:"ZHWEI-BLOG"},{name:"火喵",link:"https://www.mmbkz.cn/",avatar:"https://img.lovelu.top/2023/03/cat_logo.png",descr:"世人皆萌，唯我独帅",recom:!0,tag:"荐"},{name:"月光海岸",link:"https://www.manction.com/",avatar:"https://img.lovelu.top/2023/03/manc_logo.png",descr:"用心创造快乐"},{name:"2BROEAR",link:"https://blog.2broear.com",avatar:"https://img.lovelu.top/2023/03/broear_logo.png",descr:"兴趣指引方向，会玩才会学"},{name:"小孙同学",link:"https://blog.sunguoqi.com/",avatar:"https://img.lovelu.top/2023/03/xiaosun_logo.png",descr:"热爱可抵漫长岁月"},{name:"一蓑烟雨",link:"https://easyf12.top/",avatar:"https://img.lovelu.top/2023/03/yanyu.jpg",descr:"竹杖芒鞋轻胜马，谁怕？一蓑烟雨任平生"},{name:"关关和六六",link:"https://www.gmcllp.cn",avatar:"https://img.lovelu.top/2023/04/ggyy_logo.png",descr:"向世界分享我们的故事"},{name:"召尘秘境",link:"https://www.olive-r.cn",avatar:"https://img.lovelu.top/2023/05/zcmj_logo.png",descr:"开放，共享，包容，团结"},{name:"零叁壹",link:"https://coimo.cn/",avatar:"https://img.lovelu.top/2023/07/oiiii_logo.png",descr:"心怀阳光，必有诗和远方"},{name:"Thrive",link:"http://liuyuyang.net/",avatar:"https://img.lovelu.top/2023/09/yuyang_logo.png",descr:"记录一个架构师的崛起"},{name:"小李同学",link:"https://blog.xxfer.cn/",avatar:"https://img.lovelu.top/2024/01/xxfer_logo.png",descr:"一支努力变强的小彩笔"},{name:"往日信笺",link:"https://www.xingmail.cn/",avatar:"https://img.lovelu.top/2023/05/xinzha_logo.png",descr:"一个Xing分享自己的故事的地方"},{name:1585,link:"https://blog.1585.top/",avatar:"https://img.lovelu.top/2024/03/1585_cover.png",descr:"记录美好，分享生活"},{name:"小小的小",link:"https://www.one21.cn",avatar:"https://img.lovelu.top/2024/04/one21_logo.png",descr:"小小生活分享站"},{name:"记录生活",link:"https://9sb.net/",avatar:"https://img.lovelu.top/2024/04/9sb_logo.png",descr:"资源 共享 生活 学习"},{name:"就爱耍",link:"https://92shua.com/",avatar:"https://img.lovelu.top/2024/05/92shua_logo.png",descr:"分享路上的风景"},{name:"steven安",link:"https://chenjunan.top/",avatar:"https://img.lovelu.top/2023/03/cjn_logo.webp",descr:"努力每天都分享一些封装组件、平时常用的方法、项目上遇到的问题如何解决等..."},{name:"MacApp分享",link:"https://macapp.org.cn/",avatar:"https://img.lovelu.top/2023/03/macapp_logo.png",descr:"MacApp分享频道是一个专注于分享Mac资源的频道"},{name:"精品MAC",link:"https://pomac.cc/",avatar:"https://img.lovelu.top/2023/02/pomac_logo.png",descr:"专注分享MAC资源"},{name:"Baili",link:"https://baili.tax",avatar:"https://img.lovelu.top/2023/08/baili_logo.png",descr:"一位只想找富婆而不想努力的人"},{name:"数学竞赛课程",link:"https://www.sosocom.cn/",avatar:"https://img.lovelu.top/2024/03/sosocom_logo.png",descr:"分享幼儿,小学,初中,高中,考研培训课程！"},{name:"GTC",link:"https://gtcblog.js.cool/",avatar:"https://img.lovelu.top/2023/03/gtc_logo.png",descr:"This is my kingdom"},{name:"Aohui",link:"https://aohuiliu.fun",avatar:"https://img.lovelu.top/2023/04/aohui_logo.png",descr:"记录学习，记录生活"},{name:"Gahotx",link:"https://blog.gahotx.cn/",avatar:"https://img.lovelu.top/2023/04/gahotx_logo.png",descr:"Don’t repeat yourself"},{name:"胖胖",link:"https://www.halo.icu/",avatar:"https://img.lovelu.top/2023/03/icu_logo.webp",descr:"分享技术，博客魔改"},{name:"大胡子",link:"https://www.jakehu.cn",avatar:"https://img.lovelu.top/2023/04/dhz_logo.png",descr:"记录你我，分享精彩"},{name:"泰戈尔",link:"https://www.iftiger.com/",avatar:"https://img.lovelu.top/2023/04/tge_logo.png",descr:"智慧成就科技，科技改变生活"},{name:"灵香轩",link:"https://www.lavenderdh.cn/",avatar:"https://img.lovelu.top/2023/04/lxx_logo.png",descr:"浩瀚众星，皆降为尘"},{name:"轨道兔",link:"https://jinyu.host/",avatar:"https://img.lovelu.top/2023/04/jinyu_logo.png",descr:"为我自己，为友与仇，人与兽，爱者与不爱者"},{name:"LuckJin",link:"https://blog.luckjin.cool/",avatar:"https://img.lovelu.top/2023/04/luckjin_logo.png",descr:"热爱可抵岁月漫长，温柔可挡艰难时光"},{name:"zan003",link:"http://ca76b534.styjs.top",avatar:"https://img.lovelu.top/2023/06/zan003_logo.png",descr:"欢迎一起学习"},{name:"LogDict",link:"https://www.logdict.com",avatar:"https://img.lovelu.top/2023/10/ismeoh_logo.png",descr:"一个专注于记录, 分享, 学习的网站"},{name:"晓星浩",link:"https://blog.hyosungho.cn/",avatar:"https://img.lovelu.top/2023/09/hyosungho_logo.png",descr:"热爱科技，热爱生活"},{name:"云遇未晚",link:"https://blog.tryrun.top/",avatar:"https://img.lovelu.top/2023/03/yyww_logo.webp",descr:"集大家之所长，补其吾所短"},{name:"randycout",link:"https://www.randycout.com",avatar:"https://img.lovelu.top/2023/03/rand_logo.png",descr:"立志于打磨一个美感与实用共存的博客!"},{name:"Ahao's",link:"https://www.ahao.homes/",avatar:"https://img.lovelu.top/2023/07/ahao_logo.png",descr:"Ahao的小博客"},{name:"成成的小破站",link:"https://www.vission.top",avatar:"https://img.lovelu.top/2023/10/vission_logo.png",descr:"折腾一些好玩的小东西"}],a=[];for(;a.length<t&&o.length>0;){let t=Math.floor(Math.random()*o.length);a.push(o.splice(t,1)[0])}return a}</script>